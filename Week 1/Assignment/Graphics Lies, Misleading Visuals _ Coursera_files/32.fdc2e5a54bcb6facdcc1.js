(window.webpackJsonp=window.webpackJsonp||[]).push([[32,178],{"+MHB":function(module,e,t){"use strict";var n=t("welz"),r=t.n(n),i=t("tDXo"),a=t("+MK6"),s=t("P4G6"),o=new i.a("[data-js=origami]");o.router.on("route",function(){Object(s.b)()}),o.enableRR=function(){var e=o.router;o.router=a.a,o.router.on("routerWillLeave",function(t){e.unsavedWarningModal(t)}),r.a.history={}},o.on("deprecatedUsage",s.a),e.a=o},"+MK6":function(module,e,t){"use strict";var n=t("RIqP"),r=t.n(n),i=t("VbXa"),a=t.n(i),s=t("oYk5"),o=t.n(s),c=t("F/us"),u=t.n(c),d=t("BVC1"),l=t("yiR1"),m=t.n(l),p=t("47m/"),f=t.n(p),h=t("Af4h"),b=t.n(h),v=t("DXTi"),g=t.n(v),S=t("j4LP"),w,y=function App(e){var t=e.children;return g.a.createElement("div",null,g.a.createElement("div",{"data-js":"origami"}),t)};y.propTypes={children:g.a.PropTypes.node};var I=function(e){function NotFoundRedirect(){return e.apply(this,arguments)||this}a()(NotFoundRedirect,e);var t=NotFoundRedirect.prototype;return t.componentWillMount=function componentWillMount(){w.trigger("error",404)},t.render=function render(){return null},NotFoundRedirect}(g.a.Component),E=function legacyRouteHandler(e,t,n){var r,i;return i=r=function(r){function LegacyRouteHandler(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))||this).state={userConfirmed:!1},e.routerWillLeave=function(t){if(e.state.userConfirmed)return!0;if(t)return e.setState({nextLocation:t}),w.trigger("routerWillLeave",function(t){t?e.setState({userConfirmed:t},function(){e.context.router.push(e.state.nextLocation)}):e.setState({nextLocation:null,userConfirmed:!1})}),!1},e}a()(LegacyRouteHandler,r);var i=LegacyRouteHandler.prototype;return i.componentDidMount=function componentDidMount(){this.executeLegacyRoute()},i.componentDidUpdate=function componentDidUpdate(e){this.props.location.key!==e.location.key&&this.executeLegacyRoute()},i.executeLegacyRoute=function executeLegacyRoute(){var r=t(e,this.context.router.params);n.apply(this,r.concat(this.context.router.location.query)),this.context.router.setRouteLeaveHook(this.props.route,this.routerWillLeave)},i.render=function render(){return g.a.createElement("div",null)},LegacyRouteHandler}(g.a.Component),r.propTypes={location:g.a.PropTypes.object.isRequired,route:g.a.PropTypes.object.isRequired},r.contextTypes={router:g.a.PropTypes.object.isRequired},i},P;w=new(function(){function ReactRouterAdapter(){this.routes={},this.nativeRoutes=[],this.visitedFragments=[],m.a.emitter(this)}var e=ReactRouterAdapter.prototype;return e.addRoutes=function addRoutes(e,t){t?Object.assign(this.routes,u()(e).mapObject(t)):Object.assign(this.routes,e)},e.addNativeRoutes=function addNativeRoutes(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.nativeRoutes.push(e)},e.getLegacyRoutes=function getLegacyRoutes(e){var t=this;return u()(this.routes).map(function(n,r){return r?g.a.createElement(f.a,{key:r,path:r,component:E(r,t.getLegacyRouteParams,n)}):g.a.createElement(b.a,{key:"index:".concat(e),component:E(r,t.getLegacyRouteParams,n)})})},e.getRoutes=function getRoutes(e){if(!this.getLegacyRoutes(e).length&&this.nativeRoutes.length)return this.nativeRoutes;var t=[].concat(r()(this.getLegacyRoutes(e)),r()(this.nativeRoutes),[g.a.createElement(f.a,{path:"*",key:"notFoundRoute",component:I})]);return g.a.createElement(f.a,{path:e,component:y},t)},e.getLegacyRouteParams=function getLegacyRouteParams(e,t){var n=/\:\w*/g,r=e.match(n);return r?u()(r).chain().compact().invoke("slice",1).reduce(function(e,n){return e.concat(t[n])},[]).value():[]},e.setupLinks=function setupLinks(e,t){this.routePrefix=e,this.linkSelector=t,o()("body").on("click","a"+this.linkSelector,function(e){e.ctrlKey||e.metaKey||(e.preventDefault(),this.navigate(o()(e.currentTarget).attr("href"),!0))}.bind(this))},e.navigate=function navigate(e,t){var n=e;0!==n.indexOf(this.routePrefix)&&(n=d.a.join(this.routePrefix,n)),t&&t.replace||this.addFragmentToVisited(n),!0===t||t&&!0===t.trigger?t&&t.replace?this.rr.replace(n):this.rr.push(n):t&&t.replace?window.history.replaceState(null,null,n):window.history.pushState(null,null,n)},e.navigateTo=function navigateTo(e,t){if(!e&&""!==e)throw new Error("router.navigateTo received no href");this.navigate(e.replace(this.routePrefix,""),t)},e.addFragmentToVisited=function addFragmentToVisited(e){this.visitedFragments.push(e)},e.start=function start(e,t){var n=this,r=Object(S.a)("rendered-content");Object(S.b)(this.getRoutes(e),r).then(function(e){n.rr=e})},ReactRouterAdapter}()),e.a=w},"/oUD":function(module,e,t){"use strict";var n=t("lSNA"),r=t.n(n),i=t("VbXa"),a=t.n(i),s=t("17x9"),o=t.n(s),c=t("DXTi"),u=t.n(c),d=t("VXRf"),l=t("kwmr"),m=t("oYk5"),p=t.n(m),f=t("F/us"),h=t.n(f),b=t("+LJP"),v=t("jsrg"),g=t("Zr0k"),S=t("jSbv"),w=t("JrTX"),y=t("5ijc"),I=t("IG+7"),E=t("xPfO"),P=t("VMeS"),C=t("2Ui0"),A=t("yOj8"),T=t("JN/V"),R=t("MEnl"),O=t("pLWS"),N=t("sQ/U"),x=t("s2tf"),D=t("hbUA");function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j=function(e){function PeerItemEditView(t,n){var r;return(r=e.call(this,t,n)||this).handleSubmit=function(e){var t=r.props,n=t.computedItem,i=t.latestSubmissionAndRelated,a=t.courseId,s=t.courseSlug;r.context.executeAction(g.d,{itemId:n.id,submission:i.submission,assignmentVersion:i.submissionSchema.assignmentVersion,verifiableId:e,courseId:a,courseSlug:s,userId:N.a.get().id})},r.handleSave=function(){var e=r.props,t=e.computedItem,n=e.latestSubmissionAndRelated,i=e.courseId;r.setState({hasSaved:!0}),r.context.executeAction(g.c,{courseId:i,userId:N.a.get().id,itemId:t.id,submission:n.submission,assignmentVersion:n.submissionSchema.assignmentVersion})},r.updateSubmissionPartGenerator=function(e){return function(t){var n=r.props.latestSubmissionAndRelated,i=p.a.extend(!0,{},n.submission);i.definition.parts[e]=t,r.context.executeAction(g.a,{submission:i})}},r.blockSubmitPartGenerator=function(e){return function(t){var n=r.state.blockSubmitParts,i=Object.assign({},n);i[e]=t,r.setState({blockSubmitParts:i})}},r.updateSubmissionTitle=function(e){var t=r.props.latestSubmissionAndRelated,n=p.a.extend(!0,{},t.submission);n.definition.title=e,r.context.executeAction(g.a,{submission:n})},r.renderPreviewGradingCriteria=function(e){var t=r.props.latestSubmissionAndRelated;return u.a.createElement(O.a,{reviewSchema:t.reviewSchema,partId:e})},r.state={hasSaved:!1,blockSubmitParts:{}},r}var t;return a()(PeerItemEditView,e),PeerItemEditView.prototype.render=function render(){var e=this.props,t=e.naptimeSubmission,n=e.naptimeSubmissionSchema,r=e.errorTree,i=e.computedItem,a=e.submissionAppState,s=e.isVerifiable,o=e.lastSaveTime,c=e.showStaleAssignmentVersionError,d=e.courseId,l=e.courseBranchId,m=e.latestSubmissionAndRelated,p=e.draftHasLocalChanges,f=i.id,b=this.state.hasSaved,v=h.a.contains(h.a.values(this.state.blockSubmitParts),!0),g=m.submission,S=g.versionedAssignmentId,w=g.creatorId;return u.a.createElement("div",{className:"rc-PeerItemEditView"},u.a.createElement(x.a,{itemId:f,courseBranchId:l,courseId:d,hasSaved:b}),u.a.createElement(T.a,{submissionAppState:a,errorTree:r,isSubmitted:!1},u.a.createElement(C.a,{showStaleAssignmentVersionError:c,computedItem:i}),u.a.createElement(R.a,{courseId:d,submission:t,submissionSchema:n,errorTree:r,isSubmitted:!1,submissionAppState:a,updateSubmissionTitle:this.updateSubmissionTitle,updateSubmissionPartGenerator:this.updateSubmissionPartGenerator,blockSubmitPartGenerator:this.blockSubmitPartGenerator,renderInlineNode:this.renderPreviewGradingCriteria,itemId:f,versionedAssignmentId:S,creatorId:w,draftHasLocalChanges:p}),u.a.createElement(A.a,{submissionAppState:a,lastSaveTime:o,handleSave:this.handleSave,handleSubmit:this.handleSubmit,blockSubmit:v,isVerifiable:s,computedItem:i})))},PeerItemEditView}(u.a.Component);j.contextTypes={executeAction:o.a.func.isRequired},e.a=h.a.compose(Object(b.a)(function(e){return{showStaleAssignmentVersionError:!!e.location.query.showStaleAssignmentVersionError}}),Object(l.a)([S.a,w.a,y.a,I.a,E.a],function(e,t,n,r,i,a){var s=a.computedItem;return{latestSubmissionAndRelated:e.getState().latestSubmissionAndRelated,naptimeSubmission:e.getState().naptimeSubmission,naptimeSubmissionSchema:e.getState().naptimeSubmissionSchema,draftHasLocalChanges:e.getState().hasLocalChanges,submissionAppState:t.getState(),isVerifiable:n.isProductVerificationEnabled()&&s&&Object(D.i)(s),courseId:r.getCourseId(),courseSlug:r.getCourseSlug(),courseBranchId:i.getBranchId()||r.getCourseId()}}),Object(v.a)(function(e){var t;return e.latestSubmissionAndRelated},u.a.createElement(P.a,{className:"rc-PeerItemEditView"})),Object(d.a)(function(e){return _objectSpread(_objectSpread({},e),{},{errorTree:e.latestSubmissionAndRelated.errorTree,lastSaveTime:e.latestSubmissionAndRelated.submission&&e.latestSubmissionAndRelated.submission.createdAt})}))(j)},"06qV":function(module,exports,e){},"12aJ":function(module,e,t){"use strict";var n=t("8cuT"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("F/us"),o=t.n(s),c=t("L1vm"),u=t("VWxS"),d=t("jsrg"),l=t("6xos"),m=t("qPyB"),p=t("s2tf"),f=t("IG+7"),h=t("xPfO"),b=function PeerItemSubmittedView(e){var t=e.lastSaveTime,n=e.computedItem,r=e.title,i=e.submissionId,s=e.courseBranchId,o=e.courseId,c=e.isResubmissionAllowed;return a.a.createElement("div",{className:"rc-PeerItemSubmittedView rc-AssignmentSubmit"},a.a.createElement(p.a,{itemId:n.id,courseBranchId:s,courseId:o,hasSubmitted:!0}),a.a.createElement(l.a,{title:r,createdAt:t,shareableLink:a.a.createElement(m.a,{computedItem:n,submissionId:i})}),a.a.createElement(u.a,{courseId:o,computedItem:n,isResubmissionAllowed:c}))};e.a=o.a.compose(r()(["PeerViewSubmissionStore",f.a,h.a],function(e){var t=e.PeerViewSubmissionStore,n=e.CourseStore,r=e.SessionStore,i,a,s;return t.getState().submissionAndRelated&&(s=t.getState().submissionAndRelated.submission.definition.title,a=t.getState().submissionAndRelated.submission.id,i=t.getState().submissionAndRelated.submission.createdAt),{title:s,submissionId:a,lastSaveTime:i,courseId:n.getCourseId(),courseBranchId:r.getBranchId()||n.getCourseId()}}),Object(d.a)(function(e){return e.submissionId}),c.a.createTrackedContainer(function(){return{namespace:{page:"peer_review_my_project_review"}}}))(b)},"1N/A":function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("oYk5"),o=t.n(s),c=t("w/1P"),u=t.n(c),d=t("yhVA"),l=t.n(d),m=function(e){function UrlEditView(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).onChangeUrl=function(e){var n=t.props,r=n.submissionPart,i=n.update,a=o.a.extend(!0,{},r);a.definition.url=e.currentTarget.value,i(a)},t.onChangeTitle=function(e){var n=t.props,r=n.submissionPart,i=n.update,a=o.a.extend(!0,{},r);a.definition.title=e.currentTarget.value,i(a)},t.onChangeCaption=function(e){var n=t.props,r=n.submissionPart,i=n.update,a=o.a.extend(!0,{},r);a.definition.caption=e.currentTarget.value,i(a)},t}var t;return r()(UrlEditView,e),UrlEditView.prototype.render=function render(){var e=this.props,t=e.submissionPart,n=e.id,r=e.ariaLabelledBy;if("url"!==t.typeName)return null;return a.a.createElement("div",{className:"rc-UrlEditView"},a.a.createElement("input",{id:n,className:"c-peer-review-submit-text-field c-peer-review-submit-text-field-group-top bt3-form-control",type:"text",placeholder:l()("URL"),"aria-labelledby":r,defaultValue:t.definition.url,onChange:this.onChangeUrl,disabled:this.props.disabled}),t.definition.url&&a.a.createElement("div",null,a.a.createElement("div",{className:"c-peer-review-submit-text-field-container"},a.a.createElement("input",{className:u()("c-peer-review-submit-text-field","c-peer-review-submit-text-field-group-middle","bt3-form-control"),type:"text",placeholder:l()("Title"),defaultValue:t.definition.title,onChange:this.onChangeTitle,disabled:this.props.disabled}),!t.definition.title&&a.a.createElement("div",{className:"c-peer-review-submit-text-field-annotation"},l()("optional"))),a.a.createElement("div",{className:"c-peer-review-submit-text-field-container"},a.a.createElement("textarea",{className:u()("c-peer-review-submit-text-field","c-peer-review-submit-text-field-group-bottom","bt3-form-control"),placeholder:l()("Caption"),defaultValue:t.definition.caption,onChange:this.onChangeCaption,disabled:this.props.disabled}),!t.definition.caption&&a.a.createElement("div",{className:"c-peer-review-submit-text-field-annotation"},l()("optional")))))},UrlEditView}(a.a.Component);e.a=m},"1Nwa":function(module,exports,e){var t=e("E8VR"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},"2DyI":function(module,e,t){"use strict";var n=t("vNB3"),r=t("wiyT"),i=t.n(r);e.a=function(e){return i()(n.a.post("",e?{data:e}:{}))}},"2G20":function(module,e,t){"use strict";var n=t("CWYE");e.a=Object(n.a)("/api/verificationProgresses.v1",{type:"rest"})},"2Rnz":function(module,exports,e){var t=e("NNym"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},"2Ui0":function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("17x9"),a=t.n(i),s=t("DXTi"),o=t.n(s),c=t("MnCE"),u=t("8cuT"),d=t.n(u),l=t("i4j5"),m=t("Zr0k"),p=t("sQ/U"),f=function(e){function PeerItemUpgradeNotification(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).onRequestUpgrade=function(){var e=t.props,n=e.courseId,r=e.courseSlug,i=e.computedItem.id,a=e.submission,s=e.assignmentVersion,o=e.forceUpgradeToAssignmentVersion;t.context.executeAction(m.e,{itemId:i,submission:a,assignmentVersion:s,forceUpgradeToAssignmentVersion:o,courseId:n,courseSlug:r,userId:p.a.get().id})},t}var t;return r()(PeerItemUpgradeNotification,e),PeerItemUpgradeNotification.prototype.render=function render(){if(null==this.props.upgradeToCurrentAssignment)return null;return o.a.createElement("div",{className:"rc-PeerItemUpgradeNotification"},o.a.createElement(l.a,{onRequestUpgrade:this.onRequestUpgrade,upgradeToCurrentAssignment:this.props.upgradeToCurrentAssignment,showStaleAssignmentVersionError:this.props.showStaleAssignmentVersionError}))},PeerItemUpgradeNotification}(o.a.Component);f.contextTypes={executeAction:a.a.func.isRequired},e.a=Object(c.compose)(d()(["PeerSubmissionDraftStore","CourseStore"],function(e){var t=e.PeerSubmissionDraftStore,n=e.CourseStore,r,i=t.getState().latestSubmissionAndRelated,a=null,s=null,o=null;return null!=i&&(a=i.upgradeToCurrentAssignment,s=i.submissionSchema.assignmentVersion,o=i.upgradeToCurrentAssignment&&i.upgradeToCurrentAssignment.upgradeToVersion),{submission:i&&i.submission,upgradeToCurrentAssignment:a,assignmentVersion:s,forceUpgradeToAssignmentVersion:o,courseId:n.getCourseId(),courseSlug:n.getCourseSlug()}}))(f)},"2q9w":function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("MnCE"),o=t("w/1P"),c=t.n(o),u=t("rQpo"),d=t("q5zD"),l=t("AWZ4"),m=t("gNwb"),p=t("hbUA"),f=t("8cuT"),h=t.n(f),b=t("yhVA"),v=t.n(b),g=t("kvW3"),S=t("WLgL"),w=t("ZAK3"),y=t.n(w),I=Object(m.d)({type:"BUTTON"})(l.b),E=function(e){function AssignmentSubmitControls(){return e.apply(this,arguments)||this}var t;return r()(AssignmentSubmitControls,e),AssignmentSubmitControls.prototype.render=function render(){var e=c()("rc-AssignmentSubmitControls","horizontal-box","align-items-right","align-items-vertical-center"),t=this.props,n=t.computedItem,r=t.courseId,i=t.lastSaveTime,s=Object(p.m)(n);return a.a.createElement("div",{className:e},a.a.createElement("div",{className:"save-state-display horizontal-box"},i&&i>0?a.a.createElement("div",{className:"color-secondary-text caption-text"},a.a.createElement(g.b,{message:v()("Last saved on {lastSaveDate} at {lastSaveTime}"),lastSaveDate:Object(S.s)(i,S.c),lastSaveTime:Object(S.s)(i,S.o)})):a.a.createElement("div",{className:"color-secondary caption-text"},v()("This project has not been saved."))),s&&a.a.createElement(u.a,{courseId:r}),!s&&a.a.createElement("div",null,a.a.createElement(I,{type:"secondary",rootClassName:"save-draft","data-e2e":"save-draft",disabled:this.props.isSaving||this.props.isSubmitting,onClick:this.props.onSave,trackingName:"save"},this.props.isSaving?a.a.createElement(d.a,{name:"spinner",className:"cif-spin"}):v()("Save draft")),a.a.createElement(I,{type:"primary",rootClassName:"preview","data-e2e":"preview",onClick:this.props.onSubmit,disabled:this.props.isSaving||this.props.isSubmitting||this.props.isSubmitDisabled,trackingName:"submit"},this.props.isSubmitting?a.a.createElement(d.a,{name:"spinner",className:"cif-spin"}):this.props.submitMessage)))},AssignmentSubmitControls}(a.a.Component);E.defaultProps={submitMessage:v()("Submit for review"),isSubmitDisabled:!1},e.a=Object(s.compose)(h()(["CourseStore"],function(e){var t;return{courseId:e.CourseStore.getCourseId()}}))(E)},"4suC":function(module,e,t){"use strict";t.r(e);var n=t("VbXa"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("8cuT"),o=t.n(s),c=t("F/us"),u=t.n(c),d=t("jsrg"),l=t("L1vm"),m=t("nLAy"),p=t("dAof"),f=t("VMeS"),h=t("12aJ"),b=t("gBtg"),v=t("/oUD"),g=t("sQ/U"),S=function(e){function PeerItemSubmit(){return e.apply(this,arguments)||this}var t;return r()(PeerItemSubmit,e),PeerItemSubmit.prototype.render=function render(){var e=this.props,t=e.isSubmitted,n=e.latestSubmissionId,r=e.computedItem,i=e.loadedPeerViewSubmissionId,s=e.isResubmissionAllowed,o=i!==n;return a.a.createElement(b.a,{isSubmitted:t,editView:a.a.createElement(v.a,{computedItem:r}),submittedView:o?a.a.createElement(f.a,{className:"rc-PeerItemSubmit"}):a.a.createElement(h.a,{computedItem:r,isResubmissionAllowed:s})})},PeerItemSubmit}(a.a.Component),w=u.a.compose(l.a.createTrackedContainer(function(){return{namespace:{page:"peer_review_my_project"}}}),o()(["CourseStore","PeerViewSubmissionStore","PeerPermissionsAndProgressesStore"],function(e,t){var n=e.CourseStore,r=e.PeerViewSubmissionStore,i=e.PeerPermissionsAndProgressesStore,a=t.computedItem;return{isPeerProgressesLoaded:"loaded"===i.getState().loadState,loadedPeerViewSubmissionId:r.getState().submissionId,isSubmitted:i.getState().isSubmitted,latestSubmissionId:i.getState().latestSubmissionId,courseId:n.getCourseId()}}),Object(d.a)(function(e){var t;return e.isPeerProgressesLoaded},a.a.createElement(f.a,{className:"rc-PeerItemSubmit"})),Object(p.a)(function(e,t){var n=t.computedItem,r=t.courseId,i=t.isSubmitted,a=t.latestSubmissionId,s=t.loadedPeerViewSubmissionId,o;i&&a&&(s!==a&&e.executeAction(m.d,{userId:g.a.get().id,courseId:r,itemId:n.id,submissionId:a}))}))(S);e.default=w},"4tl4":function(module,e,t){"use strict";var n=t("DXTi"),r=t.n(n),i=function PlainTextView(e){var t=e.submissionPart;return r.a.createElement("span",{className:"rc-PlainTextView"},t.plainText&&r.a.createElement("p",{className:"body-1-text",style:{whiteSpace:"pre-line",wordWrap:"break-word"}},t.plainText))};e.a=i},"4vcJ":function(module,exports,e){var t=e("QbFO"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},"6qFN":function(module,exports,e){var t=e("hA2H"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},"6sE6":function(module,e,t){"use strict";var n=t("k7PM"),r=t("CzRB");e.a=function(e,t){var i=Object(n.a)(e,t).then(function(e){return new r.a(e.elements[0])});return i.done(),i}},"6xos":function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("17x9"),a=t.n(i),s=t("DXTi"),o=t.n(s),c=t("dcEN"),u=t.n(c),d=t("kvW3"),l=t("yhVA"),m=t.n(l),p=t("C3oq"),f=t.n(p),h=function(e){function MySubmissionHeader(){return e.apply(this,arguments)||this}var t;return r()(MySubmissionHeader,e),MySubmissionHeader.prototype.render=function render(){var e=this.props,t=e.title,n=e.createdAt,r=e.shareableLink;return o.a.createElement("div",{className:"rc-MySubmissionHeader bt3-clearfix"},o.a.createElement("div",{className:"headline-4-text"},t),o.a.createElement("div",{className:"horizontal-box"},!!n&&o.a.createElement("div",{className:"caption-text color-secondary-text"},o.a.createElement(d.b,{message:m()("Submitted on {creatorName}"),creatorName:u()(n).format("LL")})),r&&o.a.createElement("div",{className:"flex-1 align-right caption-text"},r)))},MySubmissionHeader}(o.a.Component);h.propTypes={title:a.a.string.isRequired,createdAt:a.a.number,shareableLink:a.a.element},e.a=h},"7AOT":function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("beC1"),o=t("+2ZD"),c=t("37kS"),u=t.n(c),d=t("cbTo"),l=t.n(d),m=function(e){function GradingCriteriaPreviewModal(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={showModal:!1},t.onClickModalOpen=function(e){e.preventDefault(),t.setState({showModal:!0})},t.onClickModalClose=function(){t.setState({showModal:!1})},t}var t;return r()(GradingCriteriaPreviewModal,e),GradingCriteriaPreviewModal.prototype.render=function render(){if(0===this.props.criteria.length)return null;return a.a.createElement("div",{className:"rc-GradingCriteriaPreviewModal"},a.a.createElement("button",{type:"button",onClick:this.onClickModalOpen,className:"button-link"},u()("Preview grading criteria")),this.state.showModal&&a.a.createElement(o.a,{handleClose:this.onClickModalClose,modalName:u()("Preview grading criteria")},a.a.createElement("h1",null,u()("Preview grading criteria")),this.props.privilegedRoleViewReviewSchema&&a.a.createElement("div",{className:"criteria-warning color-warn-dark"},u()("You can preview the grading criteria because you have a privileged role in this course. Normal\n                  learners cannot see the grading criteria until they submit a submission.")),this.props.criteria.map(function(e){return a.a.createElement("div",{className:"criterion card-no-action compact",key:e.get("id")},a.a.createElement(s.a,{content:e.get("prompt"),assumeStringIsHtml:!1}))})))},GradingCriteriaPreviewModal}(a.a.Component);e.a=m},"7Diq":function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("NelE"),o=t("yhVA"),c=t.n(o),u=t("4vcJ"),d=t.n(u),l=function(e){function DisplayParts(){return e.apply(this,arguments)||this}var t;return r()(DisplayParts,e),DisplayParts.prototype.render=function render(){var e=this.props,t=e.reviewSchema,n=e.reviewsSummary,r=e.reviews,i=e.submissionSchemaPartId,o=e.submissionId,u=e.assignmentLevelPointsLabel,d=t.getPartsForSubmissionSchemaPart(i);if(0===d.length)return null;return a.a.createElement("div",{className:"rc-DisplayParts bgcolor-white"},a.a.createElement("div",{className:"title horizontal-box align-items-spacebetween label-text color-secondary-text"},a.a.createElement("span",null,null!=i?c()("Rubric"):c()("Overall Assignment Rubric")),a.a.createElement("span",null,null===i&&u)),a.a.createElement("div",{className:"body-1-text"},d.map(function(e){return a.a.createElement(s.a,{key:e.get("id"),reviewSchemaPart:e,reviewsSummary:n,reviews:r,submissionId:o})})))},DisplayParts}(a.a.Component);e.a=l},"7MHW":function(module,e,t){"use strict";t.d(e,"a",function(){return provideRequestCountryCode});var n=t("VbXa"),r=t.n(n),i=t("17x9"),a=t.n(i),s=t("DXTi"),o=t.n(s),c=t("w965");function provideRequestCountryCode(e){var t=e.displayName||e.name,n=function(t){function RequestCountryCodeContextProvider(){return t.apply(this,arguments)||this}r()(RequestCountryCodeContextProvider,t);var n=RequestCountryCodeContextProvider.prototype;return n.getChildContext=function getChildContext(){return{requestCountryCode:c.a}},n.render=function render(){return o.a.createElement(e,this.props)},RequestCountryCodeContextProvider}(o.a.Component);return n.displayName=t+"RequestCountryCodeContextProvider",n.childContextTypes={requestCountryCode:a.a.string},n}},"7XRy":function(module,exports,e){},"9Cgw":function(module,e,t){"use strict";t.d(e,"b",function(){return i}),t.d(e,"a",function(){return o});var n={SUBMITTING:"submitting",SUBMIT_ERROR:"submitError",READY:"ready",SAVING:"saving",SAVE_ERROR:"saveError"},r=n,i=n.SUBMITTING,a=n.SUBMIT_ERROR,s=n.READY,o=n.SAVING,c=n.SAVE_ERROR},AbQT:function(module,exports){function webpackEmptyContext(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id="AbQT"},C2np:function(module,e,t){"use strict";var n=t("DXTi"),r=t.n(n),i=t("yfD/"),a=t("zAEL"),s=t.n(a),o=t("GaC8"),c=t.n(o),u=function CommentSection(e){var t=e.computedItem,n=e.submissionId,a=e.courseId;return r.a.createElement("div",{className:"rc-CommentsSection card-rich-interaction cozy"},r.a.createElement(i.a,{courseId:a,itemId:t.id,submissionId:n}))};e.a=u},C3oq:function(module,exports,e){var t=e("T7cu"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},C6SX:function(module,exports,e){var t=e("bgSu"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},CzRB:function(module,e,t){"use strict";var n=t("welz"),r,i=t.n(n).a.Model.extend({});e.a=i},E8VR:function(module,exports,e){},Ef0b:function(module,e,t){"use strict";t.d(e,"b",function(){return I}),t.d(e,"a",function(){return E}),t.d(e,"c",function(){return P});var n=t("wiyT"),r=t.n(n),i=t("F/us"),a=t.n(i),s=t("bPpC"),o=t("uPmI"),c=t("Q3zy"),u=t("o/MR"),d=t("beWW"),l=t("nLAy"),m=t("Hk9X"),p=t("fAMf"),f=t("E4RX"),h=t("StP4"),b=t("Nher"),v=t("uhR6"),g=function loadAssignment(e,t){var n=t.userId,r=t.courseId,i=t.itemId;return e.dispatch(v.a.LOADING_PEER_ASSIGNMENT),Object(u.a)({userId:n,courseId:r,itemId:i}).then(function(t){return e.dispatch(v.a.LOADED_PEER_ASSIGNMENT,{assignment:Object(m.a)(t),loadedItemId:i}),t})},S=function loadPermissionsAndProgresses(e,t){var n=t.userId,r=t.courseId,i=t.itemId;return e.dispatch(v.a.LOADING_PEER_USER_PERMISSIONS),Object(o.a)(n,r,i).then(function(t){e.dispatch(v.a.LOADED_DISPLAYABLE_PHASE_SCHEDULE,{displayablePhaseSchedule:t.displayablePhaseSchedules});var n=a()(t.assignmentPermissions).chain().pick(function(e){return e.isAllowed}).keys().value();return e.dispatch(v.a.LOADED_PEER_USER_PERMISSIONS,{capabilities:n,capabilitiesWithReasons:t.assignmentPermissions,receivedReviewProgresses:t.receivedReviewProgresses,submissionProgresses:t.submissionProgresses}),t})},w=function loadSubmissionDraft(e,t){var n=t.userId,i=t.courseId,a=t.itemId,s=t.permissionsAndProgresses,o=t.submissionSchema,u=t.reviewSchema;return e.dispatch(v.a.PEER_SUBMISSION_DRAFT_LOADING),null==s.submissionProgresses.latestDraftSummary?r()(Object(m.g)(o,u,n)).then(function(t){return e.dispatch(v.a.LOADED_PEER_SUBMISSION_DRAFT,{naptimeSubmissionSchema:o,naptimeSubmission:Object(p.a)(o.submissionSchema,n),latestSubmissionAndRelated:t})}):Object(c.b)({userId:n,courseId:i,itemId:a}).then(function(t){var n=Object(m.d)(t);return e.dispatch(v.a.LOADED_PEER_SUBMISSION_DRAFT,{naptimeSubmission:t.submission,naptimeSubmissionSchema:o,latestSubmissionAndRelated:n})})},y=function loadLatestSubmission(e,t){var n=t.userId,i=t.courseId,a=t.itemId,s=t.permissionsAndProgresses,o=t.submissionSchema,c=t.reviewSchema,u=t.shouldLoadOwnPeerViewSubmission;return null==s.submissionProgresses.latestSubmissionSummary?w(e,{userId:n,courseId:i,itemId:a,permissionsAndProgresses:s,submissionSchema:o,reviewSchema:c}):u?Object(l.d)(e,{userId:n,courseId:i,itemId:a,submissionId:s.submissionProgresses.latestSubmissionSummary.computed.id}):r()()},I=function loadReviewQueue(e,t){var n=t.userId,r=t.itemId,i=t.courseId,a=t.limit,s=t.start;return e.dispatch(v.a.REVIEW_QUEUE_LOADING),Object(d.a)({userId:n,courseId:i,itemId:r,start:s,limit:a}).then(function(e){return Object(m.b)(e)}).then(function(t){e.dispatch(v.a.REVIEW_QUEUE_LOADED,{data:t,itemId:r})}).catch(function(t){if(403!==t.status)throw t;e.dispatch(v.a.REVIEW_QUEUE_ERROR,{errorType:"mustSubmitBeforeReviewing"})})},E=function loadInitialPeerData(e,t){var n=t.userId,i=t.courseId,a=t.itemId,o=t.forceRefresh,c=t.shouldLoadOwnPeerViewSubmission,u=e.getStore(s.a).getState(),d="loaded"===u.loadState,l=a!==u.loadedItemId;if(!o&&d&&!l)return r()({});return r.a.all([S(e,{userId:n,courseId:i,itemId:a}),g(e,{userId:n,courseId:i,itemId:a})]).spread(function(t,r){return y(e,{userId:n,courseId:i,itemId:a,permissionsAndProgresses:t,submissionSchema:r.linked["onDemandPeerSubmissionSchemas.v1"][0],reviewSchema:r.linked["onDemandPeerReviewSchemas.v1"][0],shouldLoadOwnPeerViewSubmission:c})})},P=function refreshSubmissionAndProgress(e,t){var n=t.userId,r=t.courseId,i=t.courseSlug,a=t.itemId;return E(e,{userId:n,courseId:r,itemId:a,forceRefresh:!0,shouldLoadOwnPeerViewSubmission:!0}).then(function(){return e.executeAction(f.a,{courseId:r,itemId:a,forceRefresh:!0,shouldLoadOwnPeerViewSubmission:!0}).then(function(){return Promise.all([e.executeAction(f.a,{courseId:r,refreshProgress:!0}),e.executeAction(b.b,{courseId:r}),e.executeAction(h.b,{courseSlug:i,refetch:!0})])})})}},FnL5:function(module,exports,e){},GaC8:function(module,exports,e){var t=e("FnL5"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},"I3+W":function(module,exports,e){},J2aD:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("w/1P"),o=t.n(s),c=t("beC1"),u=t("wPTH"),d=t("4tl4"),l=t("fiqM"),m=t("X/PO"),p=t("yMmU"),f=t("PNHL"),h=t("rlpc"),b=t("yhVA"),v=t.n(b),g=t("uVbM"),S=t.n(g),w=function(e){function SubmissionPartView(){return e.apply(this,arguments)||this}r()(SubmissionPartView,e);var t=SubmissionPartView.prototype;return t.renderSpecificPart=function renderSpecificPart(){var e=this.props,t=e.submissionPart,n=e.showAutoSubmittedNote;if(!t)return null;switch(t.typeName){case"plainText":return a.a.createElement(d.a,{submissionPart:t.definition});case"richText":return a.a.createElement(u.a,{submissionPart:t.definition});case"url":return a.a.createElement(h.a,{submissionPart:t.definition});case"fileUpload":return a.a.createElement(f.a,{submissionPart:t.definition});case"offPlatform":return n&&a.a.createElement(l.a,null);case"git":return a.a.createElement(m.a,{submissionPart:t.definition});default:return null}},t.render=function render(){var e=this.props,t=e.submissionSchemaPart,n=e.isInvalid,r=o()("rc-SubmissionPartView","bgcolor-white",{invalid:n});return a.a.createElement(p.a,null,a.a.createElement("div",{className:r},a.a.createElement("div",{className:"title label-text color-secondary-text"},v()("Prompt")),a.a.createElement("div",{className:"prompt caption-text color-secondary-text"},a.a.createElement(c.a,{content:t.prompt,assumeStringIsHtml:!0})),a.a.createElement("div",{className:"body-1-text scrollable"},this.renderSpecificPart()),n&&a.a.createElement("div",{className:"body-2-text color-danger"},"Invalid submission part")))},SubmissionPartView}(a.a.Component);w.defaultProps={isInvalid:!1,showAutoSubmittedNote:!1},e.a=w},"JN/V":function(module,e,t){"use strict";var n=t("DXTi"),r=t.n(n),i=t("Ux1H"),a=function EditView(e){var t=e.submissionAppState,n=e.errorTree,a=e.isSubmitted,s=e.children;return r.a.createElement("div",{className:"rc-AssignmentEditView rc-AssignmentSubmit"},r.a.createElement(i.a,{isSubmitted:a,submissionAppState:t,errorTree:n}),r.a.createElement("div",null,s))};e.a=a},JOPA:function(module,exports,e){var t=e("aLhq"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},KIfn:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("EqTq"),o=t("ca6j"),c=t("8Ytk"),u=t("AWZ4"),d=t("yhVA"),l=t.n(d),m=t("sQ/U"),p=t("2Rnz"),f=t.n(p),h=Object(s.a)("CommentTextArea"),b=function(e){function CommentTextArea(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={},t.onChange=function(e){var n=e.target.value;t.setState({comment:n})},t.onPostClick=function(){var e=t.props.onPostingComment,n=t.state.comment;n&&e(n).then(function(){t.setState({comment:""})})},t}var t;return r()(CommentTextArea,e),CommentTextArea.prototype.render=function render(){var e=this.props.submissionId,t=this.state.comment;return a.a.createElement("div",{className:h()},a.a.createElement("div",{className:h("profile-image-container",void 0,"pii-hide")},a.a.createElement(o.a,{profile:{photoUrl:m.a.get().photo_120,fullName:m.a.get().fullName}})),a.a.createElement("div",{className:h("input-container")},a.a.createElement(c.a,{label:l()("Enter Peer Review comments"),value:t,componentId:"".concat(e,"~comment"),placeholder:l()("Share your thoughts..."),onChange:this.onChange}),t&&a.a.createElement("div",{className:h("button-container")},a.a.createElement(u.b,{type:"secondary",size:"sm",label:l()("Post"),onClick:this.onPostClick}))))},CommentTextArea}(a.a.Component);e.a=b},KwvP:function(module,e,t){"use strict";var n=t("XqAp"),r=t("+MHB"),i=new n.a;i.start(r.a.router),e.a=i},LwsB:function(module,e,t){"use strict";var n=t("DXTi"),r=t.n(n),i=t("EqTq"),a=t("wd/R"),s=t.n(a),o=t("m10x"),c=t("ca6j"),u=t("sTn5"),d=t.n(u),l=Object(i.a)("CommentRow"),m=function CommentRow(e){var t=e.commentData,n=t.creator,i=t.comment;return r.a.createElement("div",{className:l()},r.a.createElement("div",{className:l("profile-image-container")},r.a.createElement(c.a,{profile:n})),r.a.createElement("div",{className:l("comment-container")},r.a.createElement("div",{className:l("name-and-time-container")},r.a.createElement(o.i,{rootClassName:l("full-name",void 0,"pii-hide")},n.fullName),r.a.createElement("div",{className:l("comment-time")},s()(i.createdAt).fromNow())),r.a.createElement("div",{className:l("comment-content")},i.comment.definition.comment)))};e.a=m},MEnl:function(module,e,t){"use strict";var n=t("lSNA"),r=t.n(n),i=t("VbXa"),a=t.n(i),s=t("DXTi"),o=t.n(s),c=t("e6Tq"),u=t("mk7w"),d=t("qC2T"),l=t.n(d),m=t("i5JE"),p=t.n(m);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f=function(e){function AssignmentSubmitEditView(t){var n;return(n=e.call(this,t)||this).handleTitleChange=function(e){var t=n.props.updateSubmissionTitle;e.target instanceof HTMLInputElement&&(n.setState({inputValue:e.target.value}),t(e.target.value))},n.handleInputWithErrorFocus=function(){var e,t,r=(n.props.submissionAppState||{}).showValidation,i=n.state,a=i.firstSubmissionSchemaPartWithError,s=i.titleHasError;if(r){var o=document.getElementById("input-".concat((a||{}).id));if(s)return void(n.titleInputRef&&n.titleInputRef.focus());a&&o&&o.focus()}},n.getFirstSubmissionSchemaPartWithError=function(){var e=n.props,t=e.submissionSchema,r=e.errorTree;return t.parts.find(function(e){var t=e.id;return(((r.children||{})[t]||{}).errors||[]).length>0})},n.updateFirstValidationError=function(){var e=n.props,t=e.submissionAppState,r=e.errorTree,i=t.showValidation,a=null;if(i){var s=n.state,o=s.firstSubmissionSchemaPartWithError,c;s.titleHasError?a=r.errors&&r.errors.map(function(e){return e.errorMessage}).join(" "):o&&(a=(((r.children||{})[o.id]||{}).errors||[]).map(function(e){return e.errorMessage}).join(" "))}n.handleInputWithErrorFocus(),setTimeout(function(){n.setState({firstValidationError:a})},1500)},n.state={firstValidationError:null,titleHasError:!1,firstSubmissionSchemaPartWithError:null,inputValue:t.submission.title?t.submission.title:""},n}a()(AssignmentSubmitEditView,e);var t=AssignmentSubmitEditView.prototype;return t.componentDidUpdate=function componentDidUpdate(e){var t=this.props,n=t.submissionAppState,r=t.errorTree,i=n.showValidation;if(e.submissionAppState.showValidation!==i){var a=this.getFirstSubmissionSchemaPartWithError(),s;a&&(s=a),this.setState(_objectSpread({titleHasError:r.errors&&r.errors.length>0},{firstSubmissionSchemaPartWithError:s}),this.updateFirstValidationError)}},t.render=function render(){var e=this,t=this.props,n=t.courseId,r=t.submission,i=t.submissionSchema,a=t.errorTree,s=t.isSubmitted,d=t.submissionAppState,m=d.saveState,p=d.submitState,f=d.showValidation,h=t.renderInlineNode,b=t.updateSubmissionPartGenerator,v=t.blockSubmitPartGenerator,g=t.itemId,S=t.versionedAssignmentId,w=t.creatorId,y=t.draftHasLocalChanges,I=this.state,E=I.firstValidationError,P=I.inputValue,C="saving"===m||"submitting"===p||s;return o.a.createElement("div",{className:"rc-AssignmentSubmitEditView"},o.a.createElement("div",{className:"project-title",id:"titleLabel"},l()("Project Title")," *"),o.a.createElement("input",{className:"c-peer-review-submit-text-field bt3-form-control",type:"text","aria-labelledby":"titleLabel",defaultValue:r.title,placeholder:P.length?"":l()("Give your project a descriptive title"),onChange:this.handleTitleChange,"aria-required":!0,disabled:C,id:"title",ref:function ref(t){e.titleInputRef=t}}),f&&o.a.createElement(u.a,{errorTree:a}),o.a.createElement("div",{className:"parts"},i.parts.map(function(e){var t=null;return t=r.parts&&r.parts[e.id]?r.parts[e.id]:r.invalidParts[e.id],o.a.createElement(c.a,{courseId:n,key:e.id,partId:e.id,submissionSchemaPart:e,submissionPart:t,update:b(e.id),blockSubmit:v(e.id),disabled:C,errorTree:a&&a.children[e.id],showValidation:f,renderInlineNode:h,itemId:g,versionedAssignmentId:S,creatorId:w,draftHasLocalChanges:y})})),o.a.createElement("div",{className:"sr-only","aria-live":"polite",role:"region"},f&&E))},AssignmentSubmitEditView}(o.a.Component);e.a=f},NNym:function(module,exports,e){},NVtM:function(module,e,t){"use strict";var n=t("DXTi"),r=t.n(n),i=t("5iHD"),a=t("OGqI"),s=t.n(a),o=function LightNotification(e){var t=e.translatedMsg;return r.a.createElement("div",{className:"rc-LightNotification"},r.a.createElement("div",{className:"icon"},r.a.createElement(i.a,{size:24,color:"white"})),r.a.createElement("span",{className:"message"},t))};e.a=o},NelE:function(module,e,t){"use strict";var n=t("DXTi"),r=t.n(n),i=t("oihH"),a=t("6qFN"),s=t.n(a),o=function DisplayPart(e){var t=e.reviewSchemaPart,n,a=Object(i.a)(t.get("typeName")).DisplayPart;return r.a.createElement("div",{className:"rc-DisplayPart"},r.a.createElement(a,e))};e.a=o},Nu4D:function(module,exports,e){},NxPu:function(module,e,t){"use strict";var n=t("tG+S"),r="cml",i={dtdId:"assess/1",value:"<co-content><text></text></co-content>"};function getImageUploadOptions(e,t){return{context:{courseId:e,itemId:t},pendingAssetCreation:{assetType:"image",typeName:"pending",tags:[]},assetCreationUrl:"/api/onDemandPeerAssetCreationAttempts.v1"}}var a=[n.o.Bold,n.o.Italic,n.o.Underline,n.o.Divider,n.o.Link,n.o.Unlink,n.o.OrderedList,n.o.UnorderedList,n.o.Code];e.a={getImageUploadOptions:getImageUploadOptions,richTextBlocks:a}},"O+1n":function(module,e,t){"use strict";t.d(e,"a",function(){return s}),t.d(e,"b",function(){return o});var n=t("lSNA"),r=t.n(n),i=t("e7w0"),a=t("6sE6");function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s=function fetchVerifiableId(){return Object(i.a)({}).then(function(e){return e.id})},o=function verifyAssignment(e,t){return Object(a.a)(e,{data:{typeName:"verificationRequest",definition:{requestBody:_objectSpread({skipVerification:!0},t&&{fullName:t})}}})},c=function verifyAssignmentWithViewModel(e){o(e.get("verifiableId")).then(function(){e.trigger("verificationComplete",{hasVerified:!0})}).done()},u=function fetchVerifiableIdAndVerifyAssignment(e){s().then(function(t){return e.set("verifiableId",t),e}).then(c)}},OGqI:function(module,exports,e){var t=e("06qV"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},OGt8:function(module,exports,e){var t=e("7XRy"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},PSGO:function(module,e,t){"use strict";var n=t("DXTi"),r=t.n(n),i=t("oYk5"),a=t.n(i),s=function PlainTextEditView(e){var t=e.submissionPart,n=e.update,i=e.disabled,s=e.id,o=e.ariaLabelledBy;if("plainText"!==t.typeName)return null;return r.a.createElement("textarea",{id:s,defaultValue:t.definition.plainText,className:"c-peer-review-submit-text-field bt3-form-control","aria-labelledby":o,onChange:function onChange(e){var r=a.a.extend(!0,{},t);r.definition.plainText=e.target.value,n(r)},disabled:i})};e.a=s},PfZc:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("w/1P"),o=t.n(s),c=t("C9+b"),u=t("NxPu"),d=t("7GkZ"),l=t("R6Zj"),m=t.n(l),p=function(e){function RichTextCMLEditor(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={isFocused:!1},t.onFocus=function(){t.setState({isFocused:!0})},t.onBlur=function(){t.setState({isFocused:!1})},t}var t;return r()(RichTextCMLEditor,e),RichTextCMLEditor.prototype.render=function render(){var e=this.props,t=e.content,n=e.courseId,r=e.itemId,i=e.onChange,s=e.id,l;if(e.disabled)return a.a.createElement(d.a,{cml:t,contentId:s});var m=this.state.isFocused;return a.a.createElement("div",{className:o()("rc-RichTextCmlEditor",{focused:m})},a.a.createElement(c.a,{blocks:u.a.richTextBlocks,onFocus:this.onFocus,onBlur:this.onBlur,changeDelay:0,cml:t,imageUploadOptions:u.a.getImageUploadOptions(n,r),onChange:i,id:s}))},RichTextCMLEditor}(a.a.Component);e.a=p},PmkO:function(module,exports,e){var t=e("I3+W"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},PvSy:function(module,exports,e){},Q3zy:function(module,e,t){"use strict";t.d(e,"b",function(){return m}),t.d(e,"c",function(){return p}),t.d(e,"a",function(){return f});var n=t("lSNA"),r=t.n(n),i=t("wiyT"),a=t.n(i),s=t("fw5G"),o=t.n(s),c=t("DnuM");function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=Object(c.a)("/api/onDemandPeerSubmissionDrafts.v1",{type:"rest"}),d=["submission","context","creatorId","attachedAssignmentId","createdAt","upgradeSubmissionToLatestAssignment","blocksSubmit","validationErrors","onDemandPeerReviewSchemas.v1(reviewSchema)","onDemandPeerSubmissionSchemas.v1(submissionSchema)"],l=["reviewSchemas","submissionSchemas"];function responseHandler(e){if(e.elements&&e.elements.length){var t=e.linked["onDemandPeerSubmissionSchemas.v1"]&&e.linked["onDemandPeerSubmissionSchemas.v1"].length&&e.linked["onDemandPeerSubmissionSchemas.v1"][0],n=e.linked["onDemandPeerReviewSchemas.v1"]&&e.linked["onDemandPeerReviewSchemas.v1"].length&&e.linked["onDemandPeerReviewSchemas.v1"][0];if(null==t)throw new Error("No linked submission schema in onDemandPeerSubmissionDraftsApi");return _objectSpread(_objectSpread({},e.elements[0]),{},{reviewSchema:n,submissionSchema:t})}throw new Error("No elements received in onDemandPeerSubmissionDraftsApi")}var m=function getSubmissionDraft(e){var t=e.userId,n=e.courseId,r=e.itemId,i="".concat(t,"~").concat(n,"~").concat(r),s=new o.a(i).addQueryParam("fields",d.join(",")).addQueryParam("includes",l.join(","));return a()(u.get(s.toString())).then(responseHandler)},p=function updateSubmissionDraft(e){var t=e.userId,n=e.courseId,r=e.itemId,i=e.submissionDraftUpdate,s="".concat(t,"~").concat(n,"~").concat(r),c=new o.a(s).addQueryParam("fields",d.join(",")).addQueryParam("includes",l.join(","));return a()(u.put(c.toString(),{data:i})).then(responseHandler)},f=function forceUpgradedSubmissionDraft(e){var t=e.userId,n=e.courseId,r=e.itemId,i=e.forceUpgradeToAssignmentId,s="".concat(t,"~").concat(n,"~").concat(r),c=(new o.a).addQueryParam("action","forceUpgradedDraft").addQueryParam("id",s).addQueryParam("forceUpgradeToAssignmentId",i).addQueryParam("fields",d.join(",")).addQueryParam("includes",l.join(","));return a()(u.post(c.toString())).then(function(e){return e[0]})}},QbFO:function(module,exports,e){},"R/a6":function(module,exports,e){var t=e("aUJj"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},R2D1:function(module,e,t){"use strict";var n=t("DXTi"),r=t.n(n),i=t("EqTq"),a=t("kvW3"),s=t("h4VP"),o=t("btjA"),c=t("qC2T"),u=t.n(c),d=t("UhpO"),l=t.n(d),m=Object(i.a)("MinWordCount"),p=function wordCount(e){if(!e)return 0;if("string"==typeof e){var t=new o.a;return Object(s.f)(Object(s.b)(t.toCML(e,!0)))}return Object(s.f)(e)},f=function MinWordCount(e){var t=e.minWordCount,n=e.content,i=p(n);return r.a.createElement("div",{className:m()},i<t&&r.a.createElement(a.b,{message:u()("Minimum {minWordCount, plural, one{# word} other{# words}}: {currentWordCount, number}"),minWordCount:t,currentWordCount:i}))};e.a=f},R6Zj:function(module,exports,e){var t=e("jqEE"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},T7cu:function(module,exports,e){},TGkg:function(module,exports,e){},UhpO:function(module,exports,e){var t=e("Nu4D"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},Uowv:function(module,exports,e){},Ux1H:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("F/us"),o=t.n(s),c=t("w/1P"),u=t.n(c),d=t("yhVA"),l=t.n(d),m=function(e){function AssignmentSubmitAlertsView(){return e.apply(this,arguments)||this}var t;return r()(AssignmentSubmitAlertsView,e),AssignmentSubmitAlertsView.prototype.render=function render(){var e=this.props,t=e.isSubmitted,n=e.submissionAppState,r=n.submitState,i=n.saveState,s=n.showValidation,c=n.errorMessage,d=e.errorTree;if(!d||!s)return null;if(t)return a.a.createElement("div",{className:"rc-AssignmentSubmitAlertsView"},l()("Your work is submitted."));var m=o()(AssignmentSubmitAlertsView.getAllErrors(d)).some(o.a.property("blocksSubmit")),p=!!c,f=!c&&"ready"===r&&"ready"===i&&m,h=!c&&"saveError"===i&&!c,b=!c&&"submitError"===r&&"ready"===i&&m,v=!c&&"submitError"===r&&"ready"===i&&!m,g=u()("rc-AssignmentSubmitAlertsView","bt3-alert",{"bt3-alert-warning":f,"bt3-alert-danger":p||h||b||v});if(!(p||f||h||b||v))return null;return a.a.createElement("div",{className:g},p&&a.a.createElement("span",null,c),b&&a.a.createElement("span",null,l()("Error submitting assignment: please fix the errors below before submitting.")),f&&a.a.createElement("span",null,l()("Your assignment was saved, but please fix the errors below before submitting.")),v&&a.a.createElement("span",null,l()("Your assignment was saved, but an unknown error occurred while submitting.\n              Please refresh the page and try again.")),h&&a.a.createElement("span",null,l()("Save error. Please try again.")))},AssignmentSubmitAlertsView}(a.a.Component);m.getAllErrors=function(e){if(!e)return[];var t=o()(e.children).chain().map(function(e){return m.getAllErrors(e)}).flatten().value();return e.errors.concat(t)},e.a=m},VWxS:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("8cuT"),o=t.n(s),c=t("F/us"),u=t.n(c),d=t("MnCE"),l=t("yhVA"),m=t.n(l),p=t("J2aD"),f=t("7Diq"),h=t("1xaR"),b=t("C2np"),v=t("VMeS"),g=t("j/mg"),S=t("eQF6"),w=t("yMmU"),y=t("jsrg"),I=t("hbUA"),E=t("PmkO"),P=t.n(E),C=function(e){function PeerSubmissionWithReviewBody(){return e.apply(this,arguments)||this}r()(PeerSubmissionWithReviewBody,e);var t=PeerSubmissionWithReviewBody.prototype;return t.shouldShowReviews=function shouldShowReviews(e){var t=this.props,n=t.reviewProgress,r=t.reviewSchema,i=t.reviews,a=t.computedItem,s=a.isGraded,o;if(0===(null!=r?u()(r.definition.parts).filter(function(t){return t.submissionSchemaPartId===e}):[]).length||s&&!Object(I.z)(a))return!1;return!!i&&i.length>0&&(!n||n&&n.isComplete)},t.render=function render(){var e=this,t=this.props,n=t.courseId,r=t.computedItem,i=t.submission,s=t.submissionId,o=t.submissionSchema,c=t.reviewSchema,u=t.reviewsSummary,d=t.reviews,l=t.isResubmissionAllowed,v=Object(h.a)(c);return a.a.createElement("div",{className:"rc-PeerSubmissionWithReviewsBody"},o.parts.map(function(t){return a.a.createElement(S.a,{key:t.id},a.a.createElement(p.a,{submissionSchemaPart:t,submissionPart:i.parts[t.id]}),e.shouldShowReviews(t.id)&&a.a.createElement(w.a,null,a.a.createElement(f.a,{reviewSchema:v,reviewsSummary:u,reviews:d,submissionSchemaPartId:t.id,submissionId:s})))}),this.shouldShowReviews()&&a.a.createElement(S.a,null,a.a.createElement(w.a,null,a.a.createElement(f.a,{reviewSchema:v,reviewsSummary:u,reviews:d,submissionSchemaPartId:null,submissionId:s}))),null!==s&&l&&a.a.createElement(g.a,{computedItem:r,submissionId:s,className:"align-right",buttonMessage:m()("Edit submission")}),null!=s&&a.a.createElement(b.a,{computedItem:r,courseId:n,submissionId:s}))},PeerSubmissionWithReviewBody}(a.a.Component);e.a=Object(d.compose)(o()(["PeerViewSubmissionStore","PeerPermissionsAndProgressesStore"],function(e){var t=e.PeerViewSubmissionStore,n=e.PeerPermissionsAndProgressesStore,r=t.getState().submissionAndRelated,i,a=t.getState().reviewSubmissionState,s="loaded"===t.getState().loadState,o;s&&null!=a&&(o=a.backboneReviews);var c=n.getState().receivedReviewProgresses,u=c&&c.evaluationIfReady?{typeName:"structured",definition:c.evaluationIfReady.aggregatedReviewsSummary}:null,d=c?{isComplete:!!c.evaluationIfReady,earliestCompletionTime:c.earliestCompletionTime,reviewCount:c.reviewCount,minCompletionReviewCount:c.defaultReceivedReviewRequiredCount}:null;return{submission:t.getState().naptimeSubmission,submissionId:t.getState().submissionId,reviews:o,reviewSchema:r&&r.reviewSchema,submissionSchema:t.getState().naptimeSubmissionSchema,reviewsSummary:u,reviewProgress:d,isPeerViewSubmissionStoreLoaded:s}}),Object(y.a)(function(e){return e.isPeerViewSubmissionStoreLoaded},a.a.createElement(v.a,{className:"rc-PeerSubmissionWithReviewsBody"})))(C)},"X/PO":function(module,e,t){"use strict";var n=t("DXTi"),r=t.n(n),i=t("Ev5W"),a=function GitRepoView(e){var t=e.submissionPart;return r.a.createElement(i.a,{repositoryId:t.gitRepositoryId,launchRole:t.launchRole,courseId:t.courseId,itemId:t.itemId,learnerUserId:t.submitterUserId})};e.a=a},XgYJ:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("SDZF"),a=t("QjDL"),s=function(e){function AlicePeerReviewSubmitEvent(t){var n,r=t.courseBranchId,i=t.itemId;return(n=e.call(this,{type:a.i,courseBranchId:r})||this).itemId=i,n.id="".concat(a.i,"~").concat(r,"~").concat(i),n}return r()(AlicePeerReviewSubmitEvent,e),AlicePeerReviewSubmitEvent}(i.a);e.a=s},Y3VV:function(module,e,t){"use strict";var n=t("lSNA"),r=t.n(n),i=t("VbXa"),a=t.n(i),s=t("17x9"),o=t.n(s),c=t("DXTi"),u=t.n(c);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=function(e){function ContextProvider(t){var n;n=e.call(this,t)||this;var r={};return Object.keys(t.customContext).forEach(function(e){r[e]=o.a.any}),ContextProvider.childContextTypes=_objectSpread(_objectSpread({},ContextProvider.childContextTypes),r),n}a()(ContextProvider,e);var t=ContextProvider.prototype;return t.getChildContext=function getChildContext(){return Object.assign({},this.props.customContext)},t.render=function render(){return u.a.cloneElement(this.props.children,this.props)},ContextProvider}(u.a.Component);d.displayName=d,d.childContextTypes={},e.a=d},ZAK3:function(module,exports,e){var t=e("lrlb"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},ZAwA:function(module,exports,e){},Zr0k:function(module,e,t){"use strict";t.d(e,"a",function(){return u}),t.d(e,"c",function(){return l}),t.d(e,"b",function(){return m}),t.d(e,"e",function(){return p}),t.d(e,"d",function(){return f});var n=t("Q3zy"),r=t("5AUN"),i=t("Ef0b"),a=t("Hk9X"),s=t("uhR6"),o=function onSaveSuccess(e){return function(t){return e.dispatch(s.a.PEER_SUBMIT_UPDATE_ALERTS,{severity:"warning"}),e.dispatch(s.a.PEER_SUBMIT_UPDATE_LATEST_SUBMISSION_DRAFT,{latestSubmissionAndRelated:t}),e.dispatch(s.a.PEER_SUBMISSION_APP_STATE_SAVE_SUCCESS),t}},c=function onSaveFailure(e){return function(t){if(t.responseJSON||t.status)return e.dispatch(s.a.PEER_SUBMISSION_APP_STATE_SAVE_ERROR,{statusCode:t.status,response:t.responseJSON}),null;throw t}},u=function localUpdateSubmission(e,t){var n=t.submission;e.dispatch(s.a.PEER_SUBMIT_LOCAL_UPDATE_DRAFT_SUBMISSION,{submission:n})},d=function updateSubmissionDraft(e){var t=e.userId,r=e.courseId,i=e.itemId,a=e.submission;if(null==a.versionedAssignmentId)throw new Error("Error saving draft submission: could not find existing assignment id");return n.c({userId:t,courseId:r,itemId:i,submissionDraftUpdate:{submission:{title:a.definition.title,parts:a.definition.parts},attachedAssignmentId:a.versionedAssignmentId}})},l=function saveSubmission(e,t){var n=t.userId,r=t.courseId,i=t.itemId,u=t.submission,l=t.assignmentVersion;return e.dispatch(s.a.PEER_SUBMISSION_APP_STATE_SAVING),d({userId:n,courseId:r,itemId:i,submission:u}).then(function(e){return Object(a.d)(e)}).then(o(e),c(e))},m=function resetSubmission(e,t){var n=t.courseId,a=t.courseSlug,s=t.userId,o=t.itemId,c=t.submissionId;return r.b({userId:s,courseId:n,itemId:o,submissionId:c}).then(function(){return e.executeAction(i.c,{itemId:o,userId:s,courseId:n,courseSlug:a})})},p=function upgradeSubmission(e,t){var r=t.assignmentVersion,s=t.forceUpgradeToAssignmentVersion,o=t.itemId,u=t.courseId,l=t.courseSlug,m=t.userId,p=t.submission;if(null==p.versionedAssignmentId)throw new Error("Error upgrading assignment: could not find existing assignment id");var f="".concat(p.versionedAssignmentId.split("@")[0],"@").concat(s);return n.a({userId:m,courseId:u,itemId:o,forceUpgradeToAssignmentId:f}).then(function(e){return Object(a.f)(e)}).then(function(e){return d({itemId:o,submission:e,courseId:u,userId:m})}).then(function(e){return Object(a.d)(e)}).catch(c(e)).then(function(){return e.executeAction(i.c,{itemId:o,userId:m,courseId:u,courseSlug:l})})},f=function submitSubmission(e,t){var n=t.itemId,u=t.submission,l=t.assignmentVersion,m=t.verifiableId,p=t.courseId,f=t.courseSlug,h=t.userId;return e.dispatch(s.a.PEER_SUBMISSION_APP_STATE_SUBMITTING),d({itemId:n,submission:u,courseId:p,userId:h}).then(function(e){return Object(a.d)(e)}).then(o(e),c(e)).then(function(e){var t=!1;if(e&&e.errorTree&&e.errorTree.errors&&(t=!!e.errorTree.errors.find(function(e){return e.blocksSubmit})),t||!e)throw new Error("submit blocked by errors");return e}).then(function(e){return r.d({courseId:p,itemId:n,verifiableId:m,draftCreatedAt:e.submission.createdAt})}).then(function(){return e.dispatch(s.a.PEER_SUBMISSION_APP_STATE_SUBMIT_SUCCESS),e.executeAction(i.c,{itemId:n,userId:h,courseId:p,courseSlug:f})}).catch(function(){return e.dispatch(s.a.PEER_SUBMISSION_APP_STATE_SUBMIT_ERROR)})}},aLhq:function(module,exports,e){},aPOU:function(module,e,t){"use strict";var n=t("DXTi"),r=t.n(n),i=t("BkRI"),a=t.n(i),s=t("PfZc"),o=t("nU/4"),c=t("R2D1"),u=t("r6aM"),d=function RichTextEditView(e){var t,r,i=e.courseId,d=e.submissionPart,l=e.update,m=e.disabled,p=e.partId,f=e.submissionSchemaPart,h=e.ariaLabelledBy,b=function mapContentFn(e){return e},v=d.definition.richText;if("richText"!==d.typeName||"string"==typeof v)return null;var g=v.typeName,S="cml"===g?s.a:o.a,w;"html"===g?(w=v.definition,b=function mapContentFn(e){return{typeName:"html",definition:e}}):w=v;var y=Object(u.a)(f),I=null===(t=null==f?void 0:f.details)||void 0===t?void 0:null===(r=t.definition)||void 0===r?void 0:r.minWordCount;return n.createElement("div",{className:"rc-RichTextEditView"},!m&&n.createElement(S,{content:w,courseId:i,itemId:p,promptText:y,onChange:function onChange(e){var t=a()(d);t.definition.richText=b(e),l(t)},ariaLabelledBy:h}),m&&n.createElement(S,{content:w,courseId:i,itemId:p,promptText:y,onChange:function onChange(e){var t=a()(d);t.definition.richText=b(e),l(t)},ariaLabelledBy:h}),I&&n.createElement(c.a,{minWordCount:I,content:w}))};e.a=d},aUJj:function(module,exports,e){},bfOs:function(module,exports,e){},bgSu:function(module,exports,e){},cbTo:function(module,exports,e){var t=e("bfOs"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},dN2h:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("SDZF"),a=t("QjDL"),s=function(e){function AlicePeerReviewSaveEvent(t){var n,r=t.courseBranchId,i=t.itemId;return(n=e.call(this,{type:a.h,courseBranchId:r})||this).itemId=i,n.id="".concat(a.h,"~").concat(r,"~").concat(i),n}return r()(AlicePeerReviewSaveEvent,e),AlicePeerReviewSaveEvent}(i.a);e.a=s},e6Tq:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("KMW/"),o=t("beC1"),c=t("PDuk"),u=t.n(c),d=t("xIa5"),l=t("aPOU"),m=t("PSGO"),p=t("1N/A"),f=t("3H1I"),h=t("fiqM"),b=t("mk7w"),v=t("C6SX"),g=t.n(v),S=function(e){function SubmissionPartEditView(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).promptId="prompt-".concat(t.props.partId),t.inputId="input-".concat(t.props.partId),t.state={hasUnsavedChanges:!1},t.updatePart=function(e){var n=t.props.update;t.setState({hasUnsavedChanges:!0}),n(e)},t}r()(SubmissionPartEditView,e);var t=SubmissionPartEditView.prototype;return t.componentDidUpdate=function componentDidUpdate(e){var t=this.props.draftHasLocalChanges,n=this.state.hasUnsavedChanges;e.draftHasLocalChanges&&!t&&n&&this.setState({hasUnsavedChanges:!1})},t.renderEditor=function renderEditor(){var e=this.props,t=e.courseId,n=e.submissionPart,r=e.update,i=e.blockSubmit,s=e.disabled,o=e.isPartReceivingInlineFeedback,c=e.submissionSchemaPart;switch(n.typeName){case"plainText":return a.a.createElement(m.a,{submissionPart:n,ariaLabelledBy:this.promptId,id:this.inputId,update:r,disabled:s});case"richText":return a.a.createElement(l.a,{submissionPart:n,update:this.updatePart,disabled:s,partId:this.inputId,courseId:t,submissionSchemaPart:c,ariaLabelledBy:this.promptId});case"url":return a.a.createElement(p.a,{submissionPart:n,id:this.inputId,update:this.updatePart,disabled:s,ariaLabelledBy:this.promptId});case"fileUpload":return a.a.createElement(f.a,{id:this.inputId,submissionPart:n,update:this.updatePart,blockSubmit:i,disabled:s,isPartReceivingInlineFeedback:o});case"offPlatform":return a.a.createElement(h.a,null);default:return!1}},t.render=function render(){var e,t,n=this.props,r=n.submissionSchemaPart,i=n.errorTree,u=n.showValidation,l=n.renderInlineNode,m=n.partId,p=n.itemId,f=n.courseId,h=n.versionedAssignmentId,v=n.creatorId,g=n.submissionPart,S=r.id,w=this.state.hasUnsavedChanges,y=s.a.get("PeerReview","showPlagiarismCheck")&&s.a.get("PeerReview","showPlagiarismCheckAb")&&(null===(e=r.plagiarismConfig)||void 0===e?void 0:e.plagiarismCheckEnable),I=!!g.definition.fileUrl||!!(null===(t=g.definition.richText)||void 0===t?void 0:t.definition);return a.a.createElement("div",{className:"rc-SubmissionPartEditView",id:S},a.a.createElement("div",{className:"c-peer-review-submit-prompt"},a.a.createElement("div",null,a.a.createElement(o.a,{content:r.prompt,assumeStringIsHtml:!0,contentId:this.promptId,display:"inline-block"})),l&&l(m)),this.renderEditor(),u&&i&&a.a.createElement(b.a,{errorTree:i}),y&&a.a.createElement(d.b,{courseId:f,itemId:p,authorId:v,assignmentType:d.a.PEER,responseId:Object(c.tupleToStringKey)([h||"",S]),hasContent:I,hasUnsavedChanges:w}))},SubmissionPartEditView}(a.a.Component);e.a=S},e7w0:function(module,e,t){"use strict";var n=t("2DyI"),r=t("CzRB");e.a=function(e){var t=Object(n.a)(e).then(function(e){return new r.a(e.elements[0])});return t.done(),t}},eQF6:function(module,e,t){"use strict";var n=t("DXTi"),r=t.n(n),i=t("OGt8"),a=t.n(i),s=function SubmissionViewTable(e){var t=e.children;return r.a.createElement("div",{className:"rc-SubmissionViewTable"},t)};e.a=s},f0vN:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("17x9"),a=t.n(i),s=t("DXTi"),o=t.n(s),c=t("sQ/U"),u=t("+2ZD"),d=t("IDuc"),l=t("Zr0k"),m=t("yhVA"),p=t.n(m),f=t("JOPA"),h=t.n(f),b=function(e){function SubmissionDeleteModal(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={deletionInProgress:!1},t.handleSubmissionDelete=function(){var e=t.props,n=e.submissionId,r=e.computedItem.id,i=e.courseId,a=e.courseSlug,s=c.a.get().id;t.setState({deletionInProgress:!0}),t.context.executeAction(l.b,{itemId:r,submissionId:n,userId:s,courseId:i,courseSlug:a})},t}var t;return r()(SubmissionDeleteModal,e),SubmissionDeleteModal.prototype.render=function render(){return this.props.showModal?o.a.createElement(u.a,{className:"rc-SubmissionDeleteModal",handleClose:this.props.onModalClose,modalName:p()("Have you reviewed your feedback?")},o.a.createElement("h3",{className:"headline-4-text title"},p()("Have you reviewed your feedback?")),o.a.createElement("p",null,p()("\n              Your feedback on this submission will be deleted when you start editing your project. You can resubmit\n              your project for feedback when you finish editing.\n            ")),o.a.createElement("div",{className:"c-modal-action-bar"},o.a.createElement(d.a,{className:"passive",onClick:this.props.onModalClose,trackingName:"edit_project_cancel"},p()("Cancel")),o.a.createElement("button",{disabled:this.state.deletionInProgress,className:"primary submission-button",onClick:this.handleSubmissionDelete},this.state.deletionInProgress?p()("Loading..."):p()("Edit my submission")))):null},SubmissionDeleteModal}(o.a.Component);b.contextTypes={executeAction:a.a.func},e.a=b},fAMf:function(module,e,t){"use strict";var n=t("WQ4j"),r=t("F/us"),i=t.n(r),a=function initializeSubmissionFromSchema(e,t,r){var a;return{title:"",parts:i()(e.parts).chain().map(function(e){var t=e.id,i=e.details;return[t,Object(n.a)(i.typeName,r)]}).object().value(),invalidParts:{},isDraft:!0,submittedBy:t,submittedAt:Date.now(),id:""}};e.a=a},fiqM:function(module,e,t){"use strict";var n=t("DXTi"),r=t.n(n),i=t("yhVA"),a=t.n(i),s=t("NVtM"),o=function OffPlatformView(){return r.a.createElement(s.a,{translatedMsg:a()("Follow the instructions to complete this activity. Your grade will be updated after review by course staff.")})};e.a=o},gBtg:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("17x9"),a=t.n(i),s=t("DXTi"),o=t.n(s),c=t("KwvP"),u=function(e){function AssignmentSubmitWrapper(){return e.apply(this,arguments)||this}r()(AssignmentSubmitWrapper,e);var t=AssignmentSubmitWrapper.prototype;return t.componentDidMount=function componentDidMount(){c.a.scroll(0)},t.render=function render(){return this.props.isSubmitted?this.props.submittedView:this.props.editView},AssignmentSubmitWrapper}(o.a.Component);u.propTypes={isSubmitted:a.a.bool.isRequired,submittedView:a.a.node.isRequired,editView:a.a.node.isRequired},e.a=u},hA2H:function(module,exports,e){},hETs:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("17x9"),a=t.n(i),s=t("DXTi"),o=t.n(s),c=t("w/1P"),u=t.n(c),d=t("beC1"),l=t("37kS"),m=t.n(l),p=t("1Nwa"),f=t.n(p),h=function(e){function AssignmentUpgradeChanges(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).renderChange=function(e,n){if("AddsPart"===e.typeName)return t.renderChangeItem(n,"cif-plus-square",m()("Added question."),o.a.createElement("tr",{className:"bt3-success"},o.a.createElement("th",null,m()("Added")),o.a.createElement("td",{className:"change-contents"},o.a.createElement("div",null,o.a.createElement(d.a,{assumeStringIsHtml:!0,content:e.definition.prompt})))));if("RemovesPart"===e.typeName)return t.renderChangeItem(n,"cif-minus-square",m()("Removed question."),o.a.createElement("tr",{className:"bt3-danger"},o.a.createElement("th",null,m()("Removed")),o.a.createElement("td",{className:"change-contents"},o.a.createElement("div",null,o.a.createElement(d.a,{assumeStringIsHtml:!0,content:e.definition.prompt})))));if("ChangesPart"===e.typeName){var r=e.definition.changes,i=r.find(function(e){return"ChangesPrompt"===e.typeName}),a=r.filter(function(e){return"ChangesPrompt"!==e.typeName});return t.renderChangeItem(n,"cif-square",m()("Changed question."),[o.a.createElement("tr",{className:u()({"bt3-danger":!!i}),key:"changedQuestionPrompt"},o.a.createElement("th",null,m()("Original")),o.a.createElement("td",{className:"change-contents"},o.a.createElement("div",null,o.a.createElement(d.a,{assumeStringIsHtml:!0,content:e.definition.prompt})))),i&&t.renderPartChange(i,"promptChange"),a.map(t.renderPartChange),0===r.length&&m()("Unknown change.")])}return null},t.renderPartChange=function(e,t){var n="ChangesPrompt"===e.typeName?m()("New"):"",r=!1;return"ChangesPrompt"===e.typeName?r=o.a.createElement("div",{key:t},o.a.createElement(d.a,{assumeStringIsHtml:!0,content:e.definition.newPrompt})):"ChangesPoints"===e.typeName?r=m()("The new version of this question has different point values."):"ChangesOptions"===e.typeName?r=m()("The new version of this multiple choice question has different options."):"ChangesValidationRules"===e.typeName&&(r=m()("The new version of this question allows a different set of responses.")),o.a.createElement("tr",{className:"ChangesPrompt"===e.typeName?"bt3-success":"bt3-warning",key:t},o.a.createElement("th",null,n),o.a.createElement("td",{className:"change-contents"},r))},t}r()(AssignmentUpgradeChanges,e);var t=AssignmentUpgradeChanges.prototype;return t.excludeNoChangeChanges=function excludeNoChangeChanges(e){return e.filter(function(e){return"NoChange"!==e.typeName})},t.renderChangeGroup=function renderChangeGroup(e,t){var n=this.excludeNoChangeChanges(e);return 0!==n.length&&o.a.createElement("div",null,o.a.createElement("h2",null,t),o.a.createElement("ul",{className:"cif-list-ul"},n.map(this.renderChange)))},t.renderChangeItem=function renderChangeItem(e,t,n,r){return o.a.createElement("li",{className:"change-item",key:e},o.a.createElement("i",{className:t}),o.a.createElement("span",{className:"type-of-change"},n),o.a.createElement("div",{className:"change-table-container"},o.a.createElement("table",{className:"bt3-table"},o.a.createElement("tbody",null,r))))},t.render=function render(){return o.a.createElement("div",{className:"rc-AssignmentUpgradeChanges"},this.renderChangeGroup(this.props.upgradeToCurrentAssignment.submissionSchemaChanges,m()("Assignment question changes")),this.renderChangeGroup(this.props.upgradeToCurrentAssignment.reviewSchemaChanges,m()("Review question changes")))},AssignmentUpgradeChanges}(o.a.Component);h.propTypes={upgradeToCurrentAssignment:a.a.object.isRequired},e.a=h},i4j5:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("w/1P"),a=t.n(i),s=t("DXTi"),o=t.n(s),c=t("17x9"),u=t.n(c),d=t("+2ZD"),l=t("hETs"),m=t("37kS"),p=t.n(m),f=function(e){function AssignmentUpgradeNotification(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={modalOpen:!1},t.onClickSeeChanges=function(){t.setState({modalOpen:!0})},t.onClickUpgrade=function(){t.onModalClose(),t.props.onRequestUpgrade()},t.onModalClose=function(){t.setState({modalOpen:!1})},t}r()(AssignmentUpgradeNotification,e);var t=AssignmentUpgradeNotification.prototype;return t.renderAlert=function renderAlert(){var e=a()({"bt3-alert":!0,"bt3-alert-info":!this.props.showStaleAssignmentVersionError,"bt3-alert-danger":this.props.showStaleAssignmentVersionError});return o.a.createElement("div",{className:e},p()("A new version of this assignment exists."),"",o.a.createElement("button",{type:"button",className:"button-link",onClick:this.onClickSeeChanges},p()("Click here to see the changes and get the new version.")))},t.renderModal=function renderModal(){if(this.state.modalOpen){var e=this.props.upgradeToCurrentAssignment,t=!1,n=!1;return null!=e&&("NotifiesUser"===e.severity?(t=p()("Upgrade assignment"),n=o.a.createElement("p",null,p()('\n                The assignment changed since you started working on it. Click\n                "Upgrade assignment" to get the new assignment. Please read the\n                new assignment carefully and update your submission to follow\n                the new instructions.\n              '))):"ClearsSubmission"===e.severity&&(t=p()("Delete draft and upgrade assignment"),n=o.a.createElement("p",null,p()("\n                The assignment changed since you started working on it. We need\n                to delete your draft to give you the new assignment.\n              ")," ",o.a.createElement("strong",null,p()("\n                  Please save a copy of your submission outside Coursera before\n                  continuing.\n                "))," ",p()('\n                Click "Delete draft and upgrade assignment" to get the new\n                assignment. If youd like to not update your assignment, you can click Cancel and submit your answers on the old version.\n              ')))),o.a.createElement(d.a,{handleClose:this.onModalClose,modalName:p()("New assignment version")},o.a.createElement("div",{className:"rc-AssignmentUpgradeNotification assignment-upgrade-explanation"},o.a.createElement("h3",null,p()("New assignment version")),n,null!=this.props.upgradeToCurrentAssignment&&o.a.createElement(l.a,{upgradeToCurrentAssignment:this.props.upgradeToCurrentAssignment}),o.a.createElement("div",{className:"c-modal-action-bar"},o.a.createElement("button",{type:"button",className:"bt3-btn c-modal-action-button",onClick:this.onModalClose},p()("Cancel")),o.a.createElement("button",{type:"button",className:"bt3-btn bt3-btn-success c-modal-action-button",onClick:this.onClickUpgrade},t))))}return null},t.render=function render(){var e=this.props.upgradeToCurrentAssignment;return e&&"AutomaticallyUpgrades"!==e.severity?o.a.createElement("div",{className:"rc-AssignmentUpgradeNotification"},this.renderAlert(),this.renderModal()):null},AssignmentUpgradeNotification}(o.a.Component);f.propTypes={onRequestUpgrade:u.a.func.isRequired,showStaleAssignmentVersionError:u.a.bool.isRequired,upgradeToCurrentAssignment:u.a.object},e.a=f},i5JE:function(module,exports,e){var t=e("TGkg"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},"j/mg":function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("17x9"),a=t.n(i),s=t("DXTi"),o=t.n(s),c=t("F/us"),u=t.n(c),d=t("8cuT"),l=t.n(d),m=t("MnCE"),p=t("w/1P"),f=t.n(p),h=t("IDuc"),b=t("f0vN"),v=t("BVC1"),g=function(e){function SubmissionEditButton(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={showModal:!1},t.openModal=function(){t.setState({showModal:!0})},t.closeModal=function(){t.setState({showModal:!1})},t}r()(SubmissionEditButton,e);var t=SubmissionEditButton.prototype;return t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.props,n=t.hasLoaded,r=t.isSubmitted,i=t.computedItem;n&&r&&!e.isSubmitted&&(this.context.router.push(v.a.join(i.resourcePath,"submit")),this.closeModal())},t.render=function render(){var e=this.props,t=e.hasLoaded,n=e.canDelete,r=e.submissionId,i=e.computedItem,a=e.className,s=e.courseId,c=e.courseSlug,u=e.buttonMessage;if(!t)return null;return o.a.createElement("div",null,o.a.createElement("div",{className:f()("rc-SubmissionEditButton",a)},o.a.createElement(h.a,{className:"button secondary",disabled:!n,onClick:this.openModal,trackingName:"edit_project"},u)),this.state.showModal&&o.a.createElement(b.a,{showModal:!0,computedItem:i,onModalClose:this.closeModal,submissionId:r,courseId:s,courseSlug:c}))},SubmissionEditButton}(o.a.Component);g.contextTypes={router:a.a.object},e.a=Object(m.compose)(l()(["PeerPermissionsAndProgressesStore","CourseStore"],function(e){var t=e.PeerPermissionsAndProgressesStore,n=e.CourseStore,r,i,a,s;return{hasLoaded:"loaded"===t.getState().loadState,canDelete:u()(t.getState().capabilities).contains("deleteSubmission"),isSubmitted:t.getState().isSubmitted,courseId:n.getCourseId(),courseSlug:n.getCourseSlug()}}))(g)},j4LP:function(module,e,t){"use strict";t.d(e,"a",function(){return createMountNode}),t.d(e,"b",function(){return runTrackingRouter});var n=t("1mBx"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("bnOp"),o=t.n(s),c=t("tta6"),u=t("3Hqd");function createMountNode(e){var t=document.getElementById(e);return t||((t=document.createElement("div")).id=e,document.body.appendChild(t)),t}function runTrackingRouter(e,t){return Object(c.a)({routes:e}).then(function(e){return o.a.render(a.a.createElement(r.a,e),t),e.router})}var d,l={createMountNode:createMountNode,runTrackingRouter:runTrackingRouter}},jqEE:function(module,exports,e){},k7PM:function(module,e,t){"use strict";var n=t("2G20"),r=t("wiyT"),i=t.n(r);e.a=function(e,t){return i()(n.a.put(e,t))}},lrlb:function(module,exports,e){},nbX0:function(module,e,t){"use strict";function htmlToPlainText(e){return e.replace(/(https?:\/\/[^\s]+)/gi,"").replace(/<p>/gi," ").replace(/<([^>]+)>/gi,"").replace(/&nbsp;/gi," ")}t.d(e,"a",function(){return htmlToPlainText})},"o/MR":function(module,e,t){"use strict";t.d(e,"a",function(){return d});var n=t("wiyT"),r=t.n(n),i=t("fw5G"),a=t.n(i),s=t("DnuM"),o=Object(s.a)("/api/onDemandPeerAssignmentInstructions.v1",{type:"rest"}),c=["instructions"],u=["requiredAuthoredReviewCount","isMentorGraded","assignmentDetails"],d=function getAssignment(e){var t=e.userId,n=e.courseId,i=e.itemId,s=(new a.a).addQueryParam("q","latest").addQueryParam("userId",t.toString()).addQueryParam("courseId",n).addQueryParam("itemId",i).addQueryParam("includes",["gradingMetadata","reviewSchemas","submissionSchemas"].join(",")).addQueryParam("fields",[c,"onDemandPeerAssignmentGradingMetadata.v1(".concat(u.join(","),")"),"onDemandPeerReviewSchemas.v1(reviewSchema)","onDemandPeerSubmissionSchemas.v1(submissionSchema)"].join(","));return r()(o.get(s.toString()))}},pLWS:function(module,e,t){"use strict";var n=t("8cuT"),r=t.n(n),i=t("VXRf"),a=t("F/us"),s=t.n(a),o=t("jsrg"),c=t("1xaR"),u=t("7AOT");e.a=s.a.compose(r()(["PeerPermissionsAndProgressesStore"],function(e,t){var n=e.PeerPermissionsAndProgressesStore;return{hasLoaded:"loaded"===n.getState().loadState,capabilitiesWithReasons:n.getState().capabilitiesWithReasons}}),Object(o.a)(function(e){return e.hasLoaded}),Object(i.a)(function(e){var t=!1,n=e.capabilitiesWithReasons.viewReviewSchema,r;return null!=n&&(t=n.isAllowed&&"privilegedRole"===n.reason),{criteria:Object(c.a)(e.reviewSchema).getPartsForSubmissionSchemaPart(e.partId),privilegedRoleViewReviewSchema:t}}))(u.a)},qPyB:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("eJMc"),o=t.n(s),c=t("sQ/U"),u=t("BVC1"),d=t("DnuM"),l=t("hbUA"),m=t("yhVA"),p=t.n(m),f=Object(d.a)("/api/onDemandPeerSubmissions.v1",{type:"rest"}),h=function(e){function PeerItemShareableLink(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={showLink:!1},t}r()(PeerItemShareableLink,e);var t=PeerItemShareableLink.prototype;return t.componentDidMount=function componentDidMount(){var e=this,t=this.props.computedItem;f.post("?action=disableUrlSharing&userId=".concat(c.a.get().id,"&courseId=").concat(t.courseId),{data:{}}).then(function(t){!1===t&&e.setState({showLink:!0})})},t.render=function render(){var e=this.props,t=e.computedItem,n=e.submissionId,r=this.state.showLink;if(Object(l.q)(t)||!r)return null;var i=u.a.join([t.resourcePath,"review",n]);return a.a.createElement(o.a,{to:i,className:"rc-PeerItemShareableLink"},p()("Shareable Link"))},PeerItemShareableLink}(a.a.Component);e.a=h},r6aM:function(module,e,t){"use strict";t.d(e,"a",function(){return getPromptText});var n=t("F/us"),r=t.n(n),i=t("nbX0"),a=t("9vL/");function getPromptText(e){var t=r.a.isObject(e.prompt),n="string"==typeof e.prompt?{}:e.prompt,s=n.typeName,o=void 0===s?"":s,c=n.definition,u=void 0===c?"":c,d="";return t&&("cml"===o&&(d=a.a.toPlainText(e.prompt)||""),"html"===o&&"string"==typeof u&&(d=Object(i.a)(u))),d}},rIMd:function(module,exports,e){},s2tf:function(module,e,t){"use strict";var n=t("dN2h"),r=t("XgYJ"),i=t("xmcF");e.a=Object(i.a)(function(e){var t=e.itemId,i=e.courseBranchId,a=e.courseId,s=e.hasSaved,o=e.hasSubmitted;if(s)return new n.a({courseBranchId:i,itemId:t});if(o)return new r.a({courseBranchId:i,itemId:t});return null},function(e){var t;return{course_id:e.courseId}})(function(){return null})},sTn5:function(module,exports,e){var t=e("Uowv"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},tDXo:function(module,e,t){"use strict";var n=t("lSNA"),r=t.n(n),i=t("cDf5"),a=t.n(i),s=t("oYk5"),o=t.n(s),c=t("wiyT"),u=t.n(c),d=t("DXTi"),l=t.n(d),m=t("bnOp"),p=t.n(m),f=t("F/us"),h=t.n(f),b=t("rC9M"),v=t.n(b),g=t("Y3VV"),S=t("7MHW"),w=t("unn+"),y=t("r9wp"),I=t.n(y),E=t("welz"),P=t.n(E),require;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C="backbone_region",A="react_region";P.a.View.prototype._super=function(e){return this.constructor.__super__[e].apply(this,h.a.rest(arguments))};var T=null,R={current:null,body:"#origami",views:{},openDepth:0,beforeUnloadMessage:"There are unsaved changes that will be lost if you reload or leave this page.",regionHasUnsavedModel:function regionHasUnsavedModel(e){if(!e)return!1;var t;if(!(!e.view||!e.view.hasUnsavedModel)&&e.view.hasUnsavedModel())return!0;for(var n in e.regions){var r=e.regions[n];if(R.regionHasUnsavedModel(r))return!0}return!1}},O=P.a.Router.extend({initialize:function initialize(){var e=this;this.routePrefix="",this.visitedFragments=[],this.$confirmNavigation=o()(v()({})),o()("body").append(this.$confirmNavigation),o()(window).on("beforeunload.origami",function(){if(R.regionHasUnsavedModel(R.current))return R.beforeUnloadMessage})},setupLinks:function setupLinks(e,t){var n=this;this.routePrefix=e,this.linkSelector=t,o()("body").on("click","a"+this.linkSelector,function(e){e.ctrlKey||e.metaKey||(e.preventDefault(),n.navigateTo(o()(e.currentTarget).attr("href"),!0))})},addFragmentToVisited:function addFragmentToVisited(e,t){if("object"===a()(t)&&t.replace)return;this.visitedFragments?this.visitedFragments.push(e):this.visitedFragments=[e]},navigateTo:function navigateTo(e,t){e||w.default.error("router.navigateTo received no href"),this.navigate(e.replace(this.routePrefix,""),t)},navigate:function navigate(e,t){if(R.current&&R.regionHasUnsavedModel(R.current)){var n,r;o()(".confirm-navigation-message").text(R.beforeUnloadMessage),o()(".confirm-navigation-leave").one("click",function(n){this.addFragmentToVisited(e),P.a.Router.prototype.navigate.call(n.currentTarget,e,t)}.bind(this));var i={"overlay.class":"coursera-overlay"};I()(".confirm-navigation",i).open()}else this.addFragmentToVisited(e,t),P.a.Router.prototype.navigate.call(this,e,t)},addRoutes:function addRoutes(e,t){var n=this;for(var r in e){var i=e[r];t&&(i=t(i)),n.route(r,r,i),n.route(r+"/",r+"/",function(){var e,t=P.a.history.getFragment().replace(/\/(?:\?.*)*$/,"");n.navigate(t,{trigger:!0,replace:!0})})}},start:function start(e){var t;P.a.history.start({pushState:!0,hashChange:!1,root:e})||this.trigger("error",404)},unsavedWarningModal:function unsavedWarningModal(e){if(R.current&&R.regionHasUnsavedModel(R.current)){var t={"overlay.class":"coursera-overlay"},n;o()(".confirm-navigation-message").text(R.beforeUnloadMessage);var r=I()(".confirm-navigation",t);r.once("action",function(t){e(t)}),r.open()}else e(!0)}}),N=function region(e,t){var n=this,r=t||{};this.type=e,this.regions=r.regions||{},this.initialize=r.initialize||{},this.to=r.to,this.options={},this.props=t.props||{},this.context=t.context||{},this.fluxibleContext=t.fluxibleContext,this.reactRouter=t.reactRouter,this.id=r.id||e.prototype.name,this.name=e.prototype.name||r.name,this.view=null,this.regions=o.a.extend({},e.prototype.subregions,r.regions||{})};N.prototype.close=function(e){var t=this;h.a.each(t.regions,function(n,r){delete t.regions[r],n&&n.close(e)}),t.view.trigger("view:closed"),e||t.view.remove(),t.view.undelegateEvents(),t.view.off("view")},N.prototype.closing=function(){this.view.trigger("view:closing"),delete R.views[this.view.cid]},N.prototype.render=function(e){var t=this,n=h.a.compact(h.a.values(t.regions));return h.a.each(n,function(e){e.render(),e.parent=t}),this.type.prototype.isReactComponent?(this.kind=A,this.renderReactComponent()):(this.kind=C,this.renderBackboneView()),h.a.each(n,function(e){var n=e.view&&e.view.el,r=e.to||e.view&&e.view.to;h.a.isFunction(r)&&(r=r()),r&&!o.a.contains(document,n)&&(t.view.$(r).append(n),e.appended())}),e&&t.view.on("view:appended",function(){e.trigger("region:appended",{name:t.name})}),t},N.prototype.renderBackboneView=function(){this.view=new this.type(this.initialize),this.view.region=this,this.view.render(this.render)},N.prototype.renderReactComponent=function(){var e=this.context.fluxibleContext,t=this.context.router,n=Object.assign({},e?_objectSpread({fluxibleContext:e},e):{},t?{router:t}:{}),r=h.a.compose(S.a)(this.type);this.view=new P.a.View,this.view.region=this;var i=l.a.createElement(g.a,{customContext:n},l.a.createElement(r,this.props));this.view.remove=function(){return p.a.unmountComponentAtNode(this.el),P.a.View.prototype.remove.call(this),this},this.view.on("view:appended",function(){p.a.render(i,this.el)})},N.prototype.appended=function(){var e=this;e.view&&setTimeout(function(){e.view.trigger("view:appended")},0)},N.prototype.append=function(e,t){var n=this,r=u.a.defer();this.regions||(this.regions={});var i=function renderAndAppend(i){for(var a=e,s=0,c;n.regions[a];)a+=++s;if(n.regions[a]=i,i.render(T),c=t.to?h.a.isElement(t.to)?n.view.$(t.to):t.to:n.view.$el,h()(t).has("position")){var u=c.children().eq(t.position);u.length>0?o()(u[0]).before(i.view.el):c.append(i.view.el)}else c.append(i.view.el);i.appended(),T.renderedRegions.push(i),T.trigger("region:rendered",{name:i}),r.resolve(i)};return void 0!==e&&("string"==typeof e?T.region.fetch(e,t,i):i(new N(e,t))),r.promise},N.prototype.is=function(e){return e.type==this.type&&e.id==this.id},N.prototype.replace=function(e,t){this.view.$el.replaceWith(e.view.el),t&&t()},N.prototype.merge=function(e,t){var n=this;n.is(e)?h.a.each(e.regions,function(e,r){var i=n.regions[r];i&&e?(i.view.trigger("view:merging",e.initialize),i.merge(e,t),i.view.trigger("view:merged",e.initialize)):i&&!e&&(i.closing(),i.parent&&delete i.parent.regions[i.name],i.close())}):n.name==e.name&&(n.closing(),e.render(t),n.replace(e,function(){n.parent&&(n.parent.regions[e.name]=e,e.parent=n.parent,n.parent.appended()),n.close(),e.appended()}))};var x=function Origami(e,n){if(T)return T;this.renderedRegions=[],T=this,R.body=e,R.current=n,o()(window).on("resize",function(){for(var e in R.views)R.views[e].trigger("view:resize")}),this.region={make:function make(e,t){return new N(e,t)},fetch:function fetch(e,n,r){var i=h.a.uniqueId();T.trigger("region:fetching",{name:e,uid:i});var a=function returnRegion(t){T.trigger("region:fetched",{name:e,uid:i}),r(new N(t,n))},module=n.module,s=n.async;if(module&&module.lazy||module&&s)module(a);else if(module)a(module);else{var o;o=t("AbQT").requireActual?function req(e,n){var r;return n(t("AbQT")(e[0]))}:void 0,T.trigger("deprecatedUsage",{type:"asyncRequire",name:e}),o([e],a)}},getSingleton:function getSingleton(){return T},append:function append(e,t,n,r){e||(e={regions:{}});var i=function renderAndAppend(n){for(var i=t,a=0;e.regions[i];)i+=++a;return e.regions[i]=n,n.render(T),r&&r(n),n.appended(),T.renderedRegions.push(n),T.trigger("region:rendered",{name:n}),n};if(void 0!==t){if("string"!=typeof t)return i(new N(t,n));T.region.fetch(t,n,i)}},open:function open(e,t){var n=e,r={};0===R.openDepth&&T.trigger("open"),R.openDepth++;var i=function onFetch(e){var n=[];h.a.each(e.regions,function(t,r){if(!t)return;var i=u.a.defer();T.region.open(t,function(t){t.kind==C&&r!=t.name&&w.default.error("Region configured with name "+r+" but has name "+t.name),e.regions[r]=t,i.resolve(t)}),n.push(i.promise)}),u.a.allSettled(n).then(function(){if(t)return t(e);if(R.current){if(R.current.is(e))return void R.current.merge(e,T);if(R.current.name==e.name)return e.render(T),void R.current.replace(e,function(){R.current.close(),R.current=e,R.current.appended()});R.current.close(!0)}T.dontRender||(R.current=e,o()(R.body).html(R.current.render(T).view.$el),R.current.appended())}).done(function(){--R.openDepth<=0&&(T.on("close",function(){T.renderedRegions=[],R.current&&(R.current.view.once("view:closed",function(){R.current=void 0}),R.current.close.call(R.current))}),T.trigger("opened"))})};N.prototype.isPrototypeOf(e)?i(e):(h.a.isObject(e)&&(r=e[n=h.a.keys(e)[0]]),T.region.fetch(n,r,i))}},this.interruptRender=function(){this.dontRender=!0}.bind(this),this.cancelInterrupt=function(){this.dontRender=!1}.bind(this),this.router=new O,this.store={},this.tracker=[]};h.a.extend(x.prototype,P.a.Events),e.a=x},tfTN:function(module,exports,e){var t=e("ZAwA"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},uPmI:function(module,e,t){"use strict";t.d(e,"a",function(){return g});var n=t("wiyT"),r=t.n(n),i=t("F/us"),a=t.n(i),s=t("fw5G"),o=t.n(s),c=t("DnuM"),u=Object(c.a)("/api/onDemandPeerAssignmentPermissions.v1",{type:"rest"}),d="onDemandPeerSubmissionProgresses.v1",l="onDemandPeerReceivedReviewProgresses.v1",m="onDemandPeerDisplayablePhaseSchedules.v1",p=["latestSubmissionSummary","latestDraftSummary"],f=["evaluationIfReady","earliestCompletionTime","reviewCount","defaultReceivedReviewRequiredCount"],h=["currentPhase","phaseEnds","phaseStarts"],b=["deleteSubmission","listSubmissions","reviewPeers","viewReviewSchema","".concat(d,"(").concat(p.join(","),")"),"".concat(l,"(").concat(f.join(","),")"),"".concat(m,"(").concat(h.join(","),")")],v=["receivedReviewsProgress","submissionProgress","phaseSchedule"],g=function getPermissionsAndProgresses(e,t,n){var i=new o.a("".concat(e,"~").concat(t,"~").concat(n)).addQueryParam("fields",b.join(",")).addQueryParam("includes",v.join(","));return r()(u.get(i.toString())).then(function(e){return{assignmentPermissions:a()(e.elements).first(),submissionProgresses:a()(e.linked[d]).first(),receivedReviewProgresses:a()(e.linked[l]).first(),displayablePhaseSchedules:a()(e.linked[m]).first()}})}},uVbM:function(module,exports,e){var t=e("PvSy"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},vNB3:function(module,e,t){"use strict";var n=t("CWYE");e.a=Object(n.a)("/api/verifications.v1",{type:"rest"})},xmcF:function(module,e,t){"use strict";t.d(e,"a",function(){return withAliceNotification});var n=t("VbXa"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("17x9"),o=t.n(s),c=t("sQ/U"),u=t("5BCV"),d=t("KMW/"),l=t("QTut");function withAliceNotification(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return{}};return function(n){var i=n.displayName||n.name,s=function(i){function WithAliceNotificationWrapper(n,r){var a;(a=i.call(this,n,r)||this).publish=function(){var t=e(a.props),n=a.context.executeAction;t?n(l.c,{event:t}):n(l.a)};var s=d.a.get("Flex","aliceEnabled",t(n))||c.a.isSuperuser();return a.state={enabled:s},a}r()(WithAliceNotificationWrapper,i);var s=WithAliceNotificationWrapper.prototype;return s.componentDidMount=function componentDidMount(){var e;this.state.enabled&&this.publish()},s.componentDidUpdate=function componentDidUpdate(){var e;this.state.enabled&&this.publish()},s.componentWillUnmount=function componentWillUnmount(){var e=this.state.enabled,t=this.context.executeAction;e&&t(l.a)},s.render=function render(){return a.a.createElement(n,Object.assign({},this.props))},WithAliceNotificationWrapper}(a.a.Component);return s.displayName=i+"WithAliceNotificationConnector",s.contextTypes={executeAction:o.a.func},Object(u.default)(s,n),s}}},yMmU:function(module,e,t){"use strict";var n=t("DXTi"),r=t.n(n),i=t("tfTN"),a=t.n(i),s=t("eJW0"),o=t.n(s),c=function SubmissionViewCell(e){var t=e.children,n=e.ariaLabel;return t?r.a.createElement("div",{className:"rc-SubmissionViewCell",role:"region","aria-label":n&&o()("Review prompt: #{ariaLabel}",{ariaLabel:n})},t):null};e.a=c},yOj8:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),i=t("DXTi"),a=t.n(i),s=t("oYk5"),o=t.n(s),c=t("2q9w"),u=t("F9Z8"),d=t("+2ZD"),l=t("9Cgw"),m=t("O+1n"),p=t("yhVA"),f=t.n(p),h=function(e){function PeerItemVerificationSubmission(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={isSubmitting:!1,isAgreementComplete:!1,confirmedPreview:!1,showPreviewModal:!1,fullName:"",hasError:!1},t.handleSubmit=function(){if(!t.props.isVerifiable)return void t.props.handleSubmit();t.setState({isSubmitting:!0,hasError:!1});var e=null;Object(m.a)().then(function(n){return e=n,Object(m.b)(e,t.state.fullName)}).then(function(){null!=e&&t.props.handleSubmit(e)}).catch(function(){return t.setState({isSubmitting:!1,hasError:!0})}).done()},t.handleClickPreview=function(){t.setState({showPreviewModal:!0})},t.handlePreviewModalClose=function(){t.props.handleSave(),t.setState({showPreviewModal:!1,confirmedPreview:!0}),o()("html, body").animate({scrollTop:0},"slow")},t.onAgreementComplete=function(e){t.setState({isAgreementComplete:!0,fullName:e})},t.onAgreementIncomplete=function(){t.setState({isAgreementComplete:!1})},t}r()(PeerItemVerificationSubmission,e);var t=PeerItemVerificationSubmission.prototype;return t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.props.submissionAppState.submitState===l.b,n=e.submissionAppState.submitState===l.b;t&&!n?this.setState({isSubmitting:!1}):!t&&n&&this.setState({isSubmitting:!0})},t.render=function render(){var e=this.props,t=e.submissionAppState,n=e.lastSaveTime,r=e.handleSave,i=e.isVerifiable,s=e.computedItem,o=e.blockSubmit,m=this.state,p=m.isAgreementComplete,h=m.isSubmitting,b=m.hasError,v=f()("Preview"),g=this.handleClickPreview;return this.state.confirmedPreview&&(v=f()("Submit"),g=this.handleSubmit),a.a.createElement("div",{className:"rc-PeerItemVerificationSubmission",style:{marginTop:30}},i&&a.a.createElement(u.a,{onAgreementComplete:this.onAgreementComplete,onAgreementIncomplete:this.onAgreementIncomplete,isShownInsideModal:!1}),a.a.createElement(c.a,{lastSaveTime:n,isSaving:t.saveState===l.a,isSubmitting:h,onSave:r,onSubmit:g,submitMessage:v,isSubmitDisabled:i&&!p||o,computedItem:s}),b&&a.a.createElement("div",{className:"align-right caption-text",style:{marginTop:12}},f()("An error has occurred while submitting. Please try again.")),this.state.showPreviewModal&&a.a.createElement(d.a,{className:"rc-SubmissionPreviewModal",handleClose:this.handlePreviewModalClose,modalName:f()("Ready to Submit?")},a.a.createElement("h3",{className:"headline-4-text title"},f()("Preview before submitting")),a.a.createElement("div",null,f()("Take a moment to preview your work before you submit it, to make sure the work is\n                completely your own and to see how it will look to your peers when they review it.")),a.a.createElement("div",{className:"horizontal-box align-items-right"},a.a.createElement("button",{type:"button",className:"primary",onClick:this.handlePreviewModalClose},f()("Preview")))))},PeerItemVerificationSubmission}(a.a.Component);e.a=h},"yfD/":function(module,e,t){"use strict";var n=t("lSNA"),r=t.n(n),i=t("VbXa"),a=t.n(i),s=t("DXTi"),o=t.n(s),c=t("17x9"),u=t.n(c),d=t("q3BH"),l=t("yhVA"),m=t.n(l),p=t("sQ/U"),f=t("EqTq"),h=t("yuQ2"),b=t("KIfn"),v=t("LwsB"),g=t("R/a6"),S=t.n(g);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w=Object(f.a)("CommentsContainer"),y={LOADING:"LOADING",LOAD_ERROR:"LOAD_ERROR",SUBMITING:"SUBMITING",SUBMIT_ERROR:"SUBMIT_ERROR",READY:"READY"},I=function getNetworkStatusString(e){var t;return{LOADING:m()("Loading..."),LOAD_ERROR:m()("Load error!"),SUBMITING:m()("Submitting..."),SUBMIT_ERROR:m()("Submit error!")}[e]},E=function(e){function CommentsContainer(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).state={commentRowData:[],networkState:y.READY},t.onCommentFetchSuccess=function(e){var n=e.comments,i,a=e.userProfiles.reduce(function(e,t){return _objectSpread(_objectSpread({},e),{},r()({},t.userId,t))},{});t.setState({commentRowData:n.map(function(e){return{comment:e,creator:a[e.creatorId]}}),networkState:y.READY})},t.onPostingComment=function(e){var n=t.props,r=n.courseId,i=n.itemId,a=n.submissionId,s=t.context._eventData;return t.setState({networkState:y.SUBMITING}),Object(h.b)({comment:{typeName:"plain",definition:{comment:e}},courseId:r,itemId:i,submissionId:a}).then(function(){d.a.trackComponent(s,{comment_user_id:p.a.get().id,comment:e},"click","post")}).catch(function(){t.setState({networkState:y.SUBMIT_ERROR})}).then(t.fetchComments)},t.fetchComments=function(){var e=t.props,n=e.courseId,r=e.itemId,i=e.submissionId;return Object(h.a)({userId:p.a.get().id,courseId:n,itemId:r,submissionId:i}).then(t.onCommentFetchSuccess).catch(function(){t.setState({networkState:y.LOAD_ERROR})})},t}a()(CommentsContainer,e);var t=CommentsContainer.prototype;return t.componentDidMount=function componentDidMount(){this.setState({networkState:y.LOADING}),this.fetchComments()},t.componentDidUpdate=function componentDidUpdate(e){var t=this.props,n=t.courseId,r=t.itemId,i=t.submissionId;e.courseId===n&&e.itemId===r&&e.submissionId===i||this.fetchComments()},t.render=function render(){var e=this.props.submissionId,t=this.state,n=t.commentRowData,r=t.networkState;return o.a.createElement("div",{className:w()},r!==y.READY&&o.a.createElement("p",null,I(r)),o.a.createElement("h3",{className:w(void 0,void 0,"headline-1-text")},m()("Comments")),o.a.createElement("p",{className:w(void 0,void 0,"caption-text")},m()("Comments left for the learner are visible only to that learner and the person who left the comment.")),o.a.createElement("div",{className:w("input-section")},o.a.createElement(b.a,{submissionId:e,onPostingComment:this.onPostingComment})),o.a.createElement("div",{className:w("comments")},n.map(function(e){return o.a.createElement(v.a,{commentData:e,key:"".concat(e.comment.createdAt,"~").concat(e.comment.creatorId)})})))},CommentsContainer}(o.a.Component);E.contextTypes={_eventData:u.a.object},e.a=E},yuQ2:function(module,e,t){"use strict";t.d(e,"a",function(){return d}),t.d(e,"b",function(){return l});var n=t("wiyT"),r=t.n(n),i=t("fw5G"),a=t.n(i),s=t("DnuM"),o=Object(s.a)("/api/onDemandPeerComments.v1",{type:"rest"}),c="onDemandSocialProfiles.v1",u=["comment","attachedAssignmentId","creatorId","createdAt","peerSubmissionId","".concat(c,"(userId,externalUserId,fullName,photoUrl,courseRole)")],d=function getComments(e){var t=e.userId,n=e.courseId,i=e.itemId,s=e.submissionId,d=(new a.a).addQueryParam("q","submission").addQueryParam("userId",t.toString()).addQueryParam("peerSubmissionId","".concat(n,"~").concat(i,"~").concat(s)).addQueryParam("fields",u.join(",")).addQueryParam("includes","profiles");return r()(o.get(d.toString())).then(function(e){return{comments:e.elements,userProfiles:e.linked[c]}})},l=function submitComment(e){var t=e.courseId,n=e.itemId,i=e.submissionId,s=e.comment,d=(new a.a).addQueryParam("fields",u.join(",")).addQueryParam("includes","profiles");return r()(o.post(d.toString(),{data:{comment:s,peerSubmissionId:"".concat(t,"~").concat(n,"~").concat(i)}})).then(function(e){return{comments:e.elements,userProfiles:e.linked[c]}})}},zAEL:function(module,exports,e){var t=e("rIMd"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)}}]);
//# sourceMappingURL=32.fdc2e5a54bcb6facdcc1.js.map