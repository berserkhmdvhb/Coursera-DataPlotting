(window.webpackJsonp=window.webpackJsonp||[]).push([[128,162],{544:function(e,t,i){},652:function(e,t,i){"use strict";i.r(t),i.d(t,"reinitializeTPWidgets",function(){return D});var n,o=i(20),s=i.n(o),d=i(150),r=(i(10),i(151)),a=i.n(r),c=i(152),u=i(15),p=i(566),g=i(545),w=i(12),l=i(559),f=i(521);function m(e,t,i,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var s=e&&e.defaultProps,d=arguments.length-3;if(t||0===d||(t={children:void 0}),1===d)t.children=o;else if(d>1){for(var r=new Array(d),a=0;a<d;a++)r[a]=arguments[a+3];t.children=r}if(t&&s)for(var c in s)void 0===t[c]&&(t[c]=s[c]);else t||(t=s||{});return{$$typeof:n,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function b(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var I="reinit_tp_widget";function D(e){var t=new Event(I);"object"===T(e)&&e.divId&&e.widgetType&&(t.customObj=e),window.dispatchEvent(t)}var P=m("div",{}),j=function(e){function t(e){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=y(this,h(t).call(this,e))).getUserengagementMetrics=function(e){if("object"===("undefined"==typeof window?"undefined":T(window))&&window.tpsdk){var t=u.a.get("TicketId")||"",n={platform:i.props.isWapView?"msite":"web",channelCode:"TOI"};e&&(n.ticketId=t),window.tpsdk("init",n),window.tpsdk("fetch","nextEngagement","",i.props.getLoginTimesPointData)}},i.state={},i.sdkLoaded=!1,i.isLoggedIn=!1,i}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,s.a.Component),i=t,(n=[{key:"componentDidMount",value:function(){var e=this;window.TimesGDPR&&window.TimesGDPR.common.consentModule.gdprCallback&&window.TimesGDPR.common.consentModule.gdprCallback(function(t){t.isEUuser||(e.props.isWapView&&e.props.userData&&"boolean"==typeof e.props.userData.isLoggedIn&&e.getUserengagementMetrics(e.props.userData.isLoggedIn),!e.props.isWapView||e.props.loadTimePointSdk?e.loadSDK():e.setState({sdkLoaded:!0}),e.setConfigObj(),document.body.addEventListener("tpwidget-ready",function(){window.loaded="tploaded",e.initialiseTimesPoint(),window.addEventListener(I,e.reinitTPWidget.bind(e))}),e.props.getAllActivities(Object(c.a)()),Object(f.b)("dailycheckin",Math.round((new Date).getTime())))})}},{key:"componentDidUpdate",value:function(e){this.state.sdkLoaded&&((!e.userData||!e.userData.isLoggedIn)&&this.props.userData&&this.props.userData.isLoggedIn||this.props.userData.isLoggedIn&&!this.isLoggedIn)&&(Object(f.f)(),this.isLoggedIn=!0,Object(f.b)("visit",Math.round((new Date).getTime())),Object(f.b)("register",Math.round((new Date).getTime()))),this.state.sdkLoaded&&e.userData&&e.userData.isLoggedIn&&!1===this.props.userData.isLoggedIn&&(window.TPWidget&&window.TPWidget.logoutAction(),this.isLoggedIn=!1),this.state.sdkLoaded&&e.userData&&!1===e.userData.isLoggedIn&&this.props.userData&&!0===this.props.userData.isLoggedIn&&(Object(f.g)(),"undefined"!=typeof window&&window.TimesGDPR&&window.TimesGDPR.common.consentModule.gdprCallback&&window.TimesGDPR.common.consentModule.gdprCallback(function(e){e.isEUuser||Object(f.b)("dailycheckin",Math.round((new Date).getTime()))})),this.props.isWapView&&this.props.userData&&"boolean"==typeof this.props.userData.isLoggedIn&&e.userData&&e.userData.isLoggedIn!==this.props.userData.isLoggedIn&&this.getUserengagementMetrics(this.props.userData.isLoggedIn)}},{key:"reinitTPWidget",value:function(e){this.initialiseTimesPoint(e.customObj||"")}},{key:"setConfigObj",value:function(){this.TPconfig={widgettypes:[{divId:"widget-head",widgetType:"tpwidget-one"},{divId:"widget-tp-sticky",widgetType:"tpwidget-two"},{divId:"widget-two-ATF",widgetType:"tpwidget-two"},{divId:"widget-two-BTF",widgetType:"tpwidget-two"},{divId:"widget-two",widgetType:"tpwidget-two"},{divId:"widget-two-vs",widgetType:"tpwidget-two"},{divId:"widget-banner",widgetType:"tpwidget-banner",viewportId:"TOI",carousel:!0,platform:this.props.isWapView?"msite":"web"}],widgetsArray:[],isUserLoggedIn:!1,isInitialised:!1,userInfo:[],email:Object(f.d)(),url:escape(document.location.href),pcode:"TOI",scode:"News",oid:"",uid:Object(f.e)(),aname:"",txnId:"",firsttime:!0}}},{key:"loadSDK",value:function(){this.sdkLoaded=!0;var e=this;window.tp_js=function(t,i,n){var o=t.getElementsByTagName(i)[0],s=window.tp_js||{};if(t.getElementById(n))return s;var d=t.createElement(i);return d.id=n,d.src="https://".concat((w.k,"image.timespoints.iimg.in"),"/tpwidgets/static/dist/js/main.js"),d.onload=function(){e.setState({sdkLoaded:!0})},o.parentNode.insertBefore(d,o),s._e=[],s.ready=function(e){s._e.push(e)},s}(document,"script","tp-wjs")}},{key:"initialiseTimesPoint",value:function(e){this.a="";var t=("object"===T(e)?[e]:this.TPconfig.widgettypes).map(function(e){return"widget-banner"===e.divId?{ele:e.divId,widgetType:e.widgetType,viewportId:e.viewportId,platform:e.platform,carousel:e.carousel}:{ele:e.divId,widgetType:e.widgetType,callback:function(){Object(p.tpShowModalEmitter)(e.divId)}}});void 0!==window.TPWidget&&"function"==typeof window.TPWidget.init&&(Object(f.e)()?(this.TPconfig.email=Object(f.d)(),this.TPconfig.uid=Object(f.e)(),window.TPWidget.init({widgets:t,userLoginInfo:{host:this.TPconfig.pcode,channel:this.TPconfig.scode,URL:escape(document.location.href),userId:this.TPconfig.uid,oid:"",email:this.TPconfig.email}})):window.TPWidget.init({widgets:t}),this.props.setInititializeTPFlag())}},{key:"render",value:function(){return this.props.userPointsData&&Object(c.a)()?P:null}}])&&b(i.prototype,n),o&&b(i,o),t}();j.defaultProps={userData:void 0,userPointsData:void 0,loadTimePointSdk:!1};t.default=Object(d.b)(function(e){return{userPointsData:e.timesPoint.userData,userData:a()(e,"login.userData",{})}},function(e){return{getLoginTimesPointData:function(t){e(Object(l.a)(t))},setInititializeTPFlag:function(){e(Object(l.c)())},getAllActivities:function(t){e(Object(g.a)(t))}}})(j)}}]);
//# sourceMappingURL=WithTimesPoint.95cada07.chunk.js.map